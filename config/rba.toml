# EC4X Rule-Based AI Configuration
# All RBA tuning parameters centralized for balance testing
#
# This configuration system enables:
# - Balance testing without recompilation
# - Genetic algorithm parameter evolution
# - A/B testing of different AI behaviors
# - Rapid iteration during AI development
#
# IMPORTANT: All field names use snake_case to match engine config convention
# TOML structure mirrors the Nim type definitions in src/ai/rba/config.nim

# ==============================================================================
# ACT PROGRESSION THRESHOLDS
# ==============================================================================
# Dynamic 4-act strategic progression gates (game-state driven, not turn-based)
# Per docs/ai/architecture/ai_architecture.adoc lines 279-300

[act_progression]
# Act 1 → Act 2: Land grab complete (colonization threshold)
act1_to_act2_colonization_threshold = 0.90  # 90% of map colonized

# Act 2 → Act 3: Major power eliminated (top 3 at Act 2 start)
# (No threshold needed - checks house.eliminated flag)

# Act 3 → Act 4: Clear leader emerges (prestige dominance threshold)
act3_to_act4_prestige_threshold = 0.50      # 50% of total prestige

# ==============================================================================
# STRATEGY PERSONALITIES (12 strategies × 6 traits)
# ==============================================================================
# Each strategy defines a unique AI personality with weighted preferences
# Traits range from 0.0 (minimum) to 1.0 (maximum)

[strategies_aggressive]
aggression = 0.9
risk_tolerance = 0.8
economic_focus = 0.5
expansion_drive = 0.8
diplomacy_value = 0.2
tech_priority = 0.4

[strategies_economic]
aggression = 0.3
risk_tolerance = 0.3
economic_focus = 0.9
expansion_drive = 0.5
diplomacy_value = 0.6
tech_priority = 0.8

[strategies_espionage]
aggression = 0.5
risk_tolerance = 0.6
economic_focus = 0.5
expansion_drive = 0.65
diplomacy_value = 0.4
tech_priority = 0.6

[strategies_diplomatic]
aggression = 0.3
risk_tolerance = 0.4
economic_focus = 0.6
expansion_drive = 0.5
diplomacy_value = 0.9
tech_priority = 0.5

[strategies_balanced]
aggression = 0.4
risk_tolerance = 0.5
economic_focus = 0.7
expansion_drive = 0.5
diplomacy_value = 0.6
tech_priority = 0.5

[strategies_turtle]
aggression = 0.1
risk_tolerance = 0.3
economic_focus = 0.7
expansion_drive = 0.4
diplomacy_value = 0.7
tech_priority = 0.7

[strategies_expansionist]
aggression = 0.6
risk_tolerance = 0.7
economic_focus = 0.4
expansion_drive = 0.95
diplomacy_value = 0.3
tech_priority = 0.3

[strategies_tech_rush]
aggression = 0.2
risk_tolerance = 0.4
economic_focus = 0.8
expansion_drive = 0.4
diplomacy_value = 0.7
tech_priority = 0.95

[strategies_raider]
aggression = 0.85
risk_tolerance = 0.9
economic_focus = 0.4
expansion_drive = 0.6
diplomacy_value = 0.1
tech_priority = 0.5

[strategies_military_industrial]
aggression = 0.7
risk_tolerance = 0.5
economic_focus = 0.75
expansion_drive = 0.6
diplomacy_value = 0.3
tech_priority = 0.6

[strategies_opportunistic]
aggression = 0.5
risk_tolerance = 0.6
economic_focus = 0.6
expansion_drive = 0.6
diplomacy_value = 0.5
tech_priority = 0.5

[strategies_isolationist]
aggression = 0.15
risk_tolerance = 0.2
economic_focus = 0.85
expansion_drive = 0.3
diplomacy_value = 0.2
tech_priority = 0.75

# ==============================================================================
# BUDGET ALLOCATIONS BY GAME ACT
# ==============================================================================
# Budget percentages for each build objective across the 4-act game progression
# All percentages should sum to 1.0 per act
#
# Build objectives:
# - Expansion: Colony ships (ETACs), facilities (spaceports, shipyards)
# - Defense: Defensive fleets, starbases
# - Military: Combat ships (capital, escort)
# - Reconnaissance: Scouts for ELI mesh and espionage
# - Special_units: Transports, fighters, specialized ships
# - Technology: Research investment

[budget_act1_land_grab]
expansion = 0.55       # INCREASED: Maximum expansion during land grab
defense = 0.08         # REDUCED: Low priority - personality-driven (homeworld-only for most AIs)
military = 0.12        # REDUCED: Shift more budget to expansion
reconnaissance = 0.08  # REDUCED: Any ship can explore in Act 1
special_units = 0.12   # REDUCED: Need transports for invasion capability
technology = 0.05      # Minimal tech investment
filler_budget_reserved = 0.15  # 15% reserved for capacity utilization (separate from allocations)
# Total allocations: 0.55 + 0.08 + 0.12 + 0.08 + 0.12 + 0.05 = 1.00
# Filler budget is a separate reserve pool handled by splitting logic

[budget_act2_rising_tensions]
expansion = 0.45       # INCREASED from 0.20 - maintain colonization momentum through Act 2
defense = 0.10         # REDUCED from 0.15 - shift to expansion
military = 0.15        # Unchanged - balanced military buildup
reconnaissance = 0.10  # REDUCED from 0.15 - shift to expansion
special_units = 0.15   # REDUCED from 0.30 - shift to expansion
technology = 0.05      # Unchanged - minimal investment
filler_budget_reserved = 0.15  # 15% reserved for capacity utilization (Gap Fix)
    
[budget_act3_total_war]
expansion = 0.15       # INCREASED from 0.10 - continue facility scaling at mid-game colonies
defense = 0.10         # REDUCED from 0.15 - shift to expansion
military = 0.45        # Unchanged - war economy
reconnaissance = 0.05  # Unchanged - scouts already deployed
special_units = 0.15   # Unchanged - maintain carriers/fighters
technology = 0.10      # Unchanged - tech investment
filler_budget_reserved = 0.10  # Reduced to 10% for Act 3
    
[budget_act4_endgame]
expansion = 0.10       # INCREASED from 0.05 - finish facility scaling at late colonies
defense = 0.05         # REDUCED from 0.10 - shift to expansion
military = 0.55        # Unchanged - all-in on military
reconnaissance = 0.05  # Unchanged - recon complete
special_units = 0.15   # Unchanged - maintain specialized assets
technology = 0.10      # Unchanged - tech investment
filler_budget_reserved = 0.05  # Reduced to 5% for Act 4

# ==============================================================================
# TACTICAL PARAMETERS
# ==============================================================================
# Operational limits for fleet movements and responses

[tactical]
response_radius_jumps = 3        # Maximum distance for fleet response to threats
max_invasion_eta_turns = 8       # Maximum ETA for invasion operations
max_response_eta_turns = 5       # Maximum ETA for defensive responses
min_population_for_reload = 4    # Minimum colony PU for ETAC reload (must leave 1 PU after 3 PTU drain)

# ==============================================================================
# STRATEGIC PARAMETERS
# ==============================================================================
# Combat engagement thresholds

[strategic]
attack_threshold = 0.6           # Minimum strength ratio to attack (balanced)
aggressive_attack_threshold = 0.4 # Minimum ratio for aggressive personalities
retreat_threshold = 0.3          # Strength ratio triggering retreat

# ==============================================================================
# ECONOMIC PARAMETERS
# ==============================================================================
# Terraforming costs by planet class transition (in PP)

[economic]
terraforming_costs_extreme_to_desolate = 60
terraforming_costs_desolate_to_hostile = 150
terraforming_costs_hostile_to_harsh = 350
terraforming_costs_harsh_to_benign = 850
terraforming_costs_benign_to_lush = 2100
terraforming_costs_lush_to_eden = 5100

# ==============================================================================
# ORDERS PARAMETERS
# ==============================================================================
# Order generation parameters and thresholds

[orders]
research_max_percent = 0.25      # Maximum research budget (% of treasury)
espionage_investment_percent = 0.03  # Espionage budget (% of original treasury)

# ==============================================================================
# LOGISTICS PARAMETERS
# ==============================================================================
# Mothballing and fleet management thresholds

[logistics]
mothballing_treasury_threshold_pp = 900      # Treasury level triggering mothballing consideration
mothballing_maintenance_ratio_threshold = 0.10  # Maintenance/production ratio triggering mothballing
mothballing_min_fleet_count = 3              # Minimum fleets before considering mothballing

# ==============================================================================
# FLEET COMPOSITION BY DOCTRINE
# ==============================================================================
# Target fleet composition ratios for different combat doctrines

[fleet_composition_balanced]
capital_ratio = 0.40
escort_ratio = 0.40
specialist_ratio = 0.20

[fleet_composition_aggressive]
capital_ratio = 0.50
escort_ratio = 0.35
specialist_ratio = 0.15

[fleet_composition_defensive]
capital_ratio = 0.30
escort_ratio = 0.50
specialist_ratio = 0.20

# ==============================================================================
# THREAT ASSESSMENT
# ==============================================================================
# Thresholds for threat level classification

[threat_assessment]
critical_threshold = 0.8
high_threshold = 0.6
moderate_threshold = 0.4
low_threshold = 0.2

# ==============================================================================
# ADMIRAL CONFIGURATION
# ==============================================================================
# Strategic fleet rebalancing for act-specific objectives

[domestikos]
enabled = true                      # Enable domestikos module for colony defense distribution
split_threshold_act1 = 2            # Split fleets with 2+ ships in Act 1
merge_threshold_act2 = 3            # Merge when 3+ idle single-ship fleets
rendezvous_preference = "homeworld" # Where to merge fleets: homeworld, frontline, center
max_invasion_eta_turns = 8          # Maximum ETA for invasion operations

# Affordability thresholds (how much of treasury per build request)
# These are per-request limits, not total spending caps
affordability_act1 = 0.30           # Act 1: 30% of treasury per request
affordability_act2 = 0.50           # Act 2: 50% of treasury per request
affordability_act3 = 0.70           # Act 3: 70% of treasury per request
affordability_act4 = 0.90           # Act 4: 90% of treasury per request

# ZeroTurnCommand Fleet Management (Immediate-execution fleet operations)
fleet_management_enabled = true     # Enable merge/detach/transfer using ZeroTurnCommand API

# Phase 3: Build Requirements System (Requirements-driven ship production)
build_requirements_enabled = true   # Enable requirements-driven build system
defense_gap_detection_enabled = true
defense_gap_max_distance = 5        # Max jump distance to consider for defense
offensive_requirements_enabled = true
critical_priority_homeworld = true  # Always Critical priority for homeworld
high_priority_production_threshold = 50  # Industry threshold for High priority
threat_assessment_radius = 3        # Jumps to check for enemy fleets

# Strategic Triage Budget Reserves
min_recon_budget_percent = 0.08     # Minimum 8% for reconnaissance
min_expansion_budget_percent = 0.15 # Minimum 15% for expansion

# Escalation Thresholds
escalation_low_to_medium_turns = 3  # Low → Medium after 3 turns undefended
escalation_medium_to_high_turns = 5 # Medium → High after 5 turns
escalation_high_to_critical_turns = 7  # High → Critical after 7 turns

# Intelligence-Driven Ship Building (Phase F)
capacity_high_utilization_threshold = 0.9  # Defer non-critical requirements at 90%+ capacity
etacs_per_uncolonized_system = 2.0         # 2.0 ETACs per uncolonized system
max_etacs_queued = 16                      # Cap ETAC production at 16

# Offensive building (personality-modulated)
aggressive_transport_ratio = 0.33          # Aggressive AI: 1 transport per 3 colonies
aggressive_marine_per_transport = 1        # 1 marine division per transport
reactive_invasion_multiplier = 1.5         # Defensive AI: 1.5x enemy defenses for invasion

# Phase 2: Invasion Campaign Management
max_concurrent_campaigns = 3               # Maximum simultaneous invasion campaigns
campaign_stall_timeout = 3                 # Turns without action before abandoning campaign
campaign_bombardment_max = 10              # Max bombardment rounds before reassessment
campaign_intel_freshness = 5               # Max age (turns) for intel to be considered fresh

# Fighter/Carrier requirements (threat-based)
fighter_threat_threshold_low = 0.2         # Threat > 0.2 = threatened colony
fighter_threat_threshold_high = 0.5        # Threat > 0.5 = high-threat colony
max_fighters = 20                          # Cap total fighters at 20
fighters_per_carrier = 4                   # 1 carrier per 4 fighters
max_carriers = 6                           # Cap total carriers at 6

[domestikos_offensive]
# Offensive operations priority and scoring parameters
# Priority values for requirement types
priority_base = 80                  # Base priority for offensive operations
priority_high = 90                  # High priority (enemy targets)
priority_medium = 70                # Medium priority
priority_low = 50                   # Low priority
priority_deferred = 30              # Deferred priority

# Distance-based proximity bonuses (priority boost by jump distance)
distance_bonus_1_2_jumps = 300.0    # Immediate neighbors (1-2 jumps)
distance_bonus_3_4_jumps = 100.0    # Close targets (3-4 jumps)
distance_bonus_5_6_jumps = 50.0     # Moderate distance (5-6 jumps)

# Target weakness thresholds (strength ratio for vulnerable targets)
weakness_threshold_vulnerable = 0.7  # <70% of average = vulnerable
weakness_threshold_weak = 0.4        # <40% of average = very weak
weakness_priority_boost = 75.0       # Priority boost for weak targets

# Strength and value multipliers
fleet_strength_multiplier = 50.0     # Fleet strength contribution
estimated_value_multiplier = 2.0     # Estimated colony value multiplier
vulnerability_multiplier = 50.0      # Vulnerability score multiplier

# Defense estimation
ground_defense_divisor = 2           # Estimate ground defenses (div 2)

# Intelligence parameters
max_intel_age_turns = 5              # Max age for intel to be useful
conservative_ship_estimate = 5       # Ships to assume if no intel

# ROE (Rules of Engagement) priority
roe_blitz_priority = 9               # Blitz attack priority
roe_bombardment_priority = 8         # Bombardment priority

[domestikos_defensive]
# Defensive operations priority and scoring parameters
# Production-based scoring
production_weight = 0.5              # Colony production weight in priority

# Threat-based priority boosts
threat_boost_critical = 500.0        # Critical threat priority boost
threat_boost_high = 200.0            # High threat priority boost
threat_boost_moderate = 50.0         # Moderate threat priority boost

# Proximity-based multipliers (threat escalation by distance)
proximity_multiplier_1_jump = 3.0    # 1 jump away = imminent threat
proximity_multiplier_2_jumps = 2.0   # 2 jumps away = near threat
movement_boost_base = 50.0           # Base movement threat boost

# Intel quality penalties
stale_intel_penalty = 0.9            # 10% penalty for stale intel

# Strategic bonuses
frontier_bonus_per_distance = 2.0    # Frontier colony bonus per jump
owned_system_priority_boost = 75.0   # Boost for threatened owned systems

# Tactical parameters
defend_max_range = 3                 # Max jump range for defense orders

[domestikos_intelligence_ops]
# Intelligence operations scoring (threat assessment)
threat_contribution_per_fleet = 0.3  # Threat added per nearby enemy fleet
threat_level_high_score = 0.75       # High threat level score
threat_level_moderate_score = 0.5    # Moderate threat level score
threat_level_low_score = 0.25        # Low threat level score

[domestikos_staging]
# Staging location priority scoring
priority_acceptable_close = 50.0     # Acceptable location, close distance
priority_acceptable_far = 30.0       # Acceptable location, far distance
priority_owned_system = 200.0        # Strong preference for owned systems

# ==============================================================================
# UNIT PRIORITY SCORING
# ==============================================================================
# Act-aware priority scores for ship construction (src/ai/rba/domestikos/unit_priority.nim)
# Used by build_requirements.nim capacity filler to select optimal units
#
# Scoring breakdown:
#   - Act appropriateness: 0.0 - 4.0 points (defined below per Act)
#   - Strategic value: 0.0 - 2.0 points (defined in strategic_values)
#   - Budget efficiency: 0.0 - 1.0 points (calculated at runtime)
#
# Total max score: 7.0 points

[domestikos_unit_priorities_act1_land_grab]
# Act 1: Land Grab - Expansion and colony defense
# Priority: ETACs, Escorts, Light ships
etac = 4.0
destroyer = 3.0
frigate = 3.0
corvette = 3.0
scout = 2.5
light_cruiser = 2.0
fighter = 2.0
cruiser = 1.0
raider = 1.0
battlecruiser = 0.5
heavy_cruiser = 0.5
battleship = 0.5
dreadnought = 0.5
super_dreadnought = 0.5
carrier = 0.5
super_carrier = 0.5
planet_breaker = 0.5
troop_transport = 0.0  # HARD GATE - Act 2+ only

[domestikos_unit_priorities_act2_rising_tensions]
# Act 2: Rising Tensions - Military buildup with medium capitals
# Priority: Cruisers, Battlecruisers, Carriers
cruiser = 4.0
light_cruiser = 4.0
battlecruiser = 4.0
carrier = 3.5
heavy_cruiser = 3.0
raider = 2.5
fighter = 2.5
destroyer = 2.0
frigate = 2.0
etac = 2.0
scout = 2.0
troop_transport = 2.0
corvette = 1.5
battleship = 1.5
super_carrier = 1.5
dreadnought = 1.0
super_dreadnought = 1.0
planet_breaker = 1.0

[domestikos_unit_priorities_act3_total_war]
# Act 3: Total War - Heavy capitals and decisive battles
# Priority: Battleships, Dreadnoughts, Super Carriers
battleship = 4.0
dreadnought = 4.0
super_carrier = 3.5
heavy_cruiser = 3.0
cruiser = 2.5
battlecruiser = 2.5
carrier = 2.5
super_dreadnought = 2.0
raider = 2.0
planet_breaker = 2.0
light_cruiser = 2.0
fighter = 2.0
destroyer = 1.5
troop_transport = 1.5
frigate = 1.0
corvette = 1.0
scout = 1.0
etac = 0.5

[domestikos_unit_priorities_act4_endgame]
# Act 4: Endgame - Ultimate capitals and siege warfare
# Priority: Super Dreadnoughts, Planet Breakers
super_dreadnought = 4.0
dreadnought = 4.0
planet_breaker = 3.5
battleship = 3.0
super_carrier = 3.0
heavy_cruiser = 2.5
battlecruiser = 2.0
carrier = 2.0
cruiser = 1.5
raider = 1.5
fighter = 1.5
light_cruiser = 1.0
troop_transport = 1.0
destroyer = 0.5
frigate = 0.5
corvette = 0.5
etac = 0.5
scout = 0.5

[domestikos_unit_priorities_strategic_values]
# Strategic value scoring (0.0 - 2.0 points)
# Independent of Act - represents inherent combat value
# Capital Ships (2.0 points) - Ultimate firepower
super_dreadnought = 2.0
dreadnought = 2.0
battleship = 2.0
super_carrier = 2.0
# Medium Capitals (1.5 points) - Force projection
battlecruiser = 1.5
heavy_cruiser = 1.5
cruiser = 1.5
carrier = 1.5
# Escorts & Specialized (1.0 points) - Core fleet
destroyer = 1.0
light_cruiser = 1.0
frigate = 1.0
etac = 1.0
raider = 1.0
planet_breaker = 1.0
# Light Units (0.5 points) - Support roles
corvette = 0.5
scout = 0.5
troop_transport = 0.5
fighter = 0.5

# ==============================================================================
# EPARCH PARAMETERS (Economic Administration)
# ==============================================================================
# Colony management: auto-repair, tax rates, dock allocation

[eparch]
auto_repair_threshold = 100  # Min treasury (PP) to enable auto-repair at colonies
                             # Below this: disable auto-repair to conserve PP
                             # Above this: enable for convenience

[eparch_maintenance]
# Maintenance shortfall penalty avoidance
penalty_turns_critical = 3   # Critical response threshold (turns)

[eparch_facilities]
# Threat penalty multipliers for facility placement (0.0-1.0)
# Applied to colony production score when selecting facility location
threat_penalty_critical_shipyard = 0.2    # Critical threat: 80% penalty
threat_penalty_high_shipyard = 0.5        # High threat: 50% penalty
threat_penalty_moderate_shipyard = 0.8    # Moderate threat: 20% penalty
threat_penalty_critical_spaceport = 0.2   # Critical threat: 80% penalty
threat_penalty_high_spaceport = 0.5       # High threat: 50% penalty
threat_penalty_moderate_spaceport = 0.8   # Moderate threat: 20% penalty
threat_penalty_critical_starbase = 0.1    # Critical threat: 90% penalty (expensive)
threat_penalty_high_starbase = 0.3        # High threat: 70% penalty
threat_penalty_moderate_starbase = 0.7    # Moderate threat: 30% penalty

# Staleness penalty for blind spots (stale intelligence)
staleness_penalty_facility = 0.9          # 10% penalty for unknown risk (shipyard/spaceport)
staleness_penalty_starbase = 0.85         # 15% penalty for expensive starbase

# Target facility ratios by Act (multipliers applied to colony count)
# Shipyard targets
shipyard_ratio_act1 = 0.5                 # 1 per 2 colonies (expansion-focused)
shipyard_ratio_act2 = 1.0                 # 1 per colony (military buildup)
shipyard_ratio_act3 = 1.5                 # 1.5 per colony (maximum production)
shipyard_ratio_act4 = 2.5                 # 2.5 per colony (endgame capacity)

# Starbase targets
starbase_ratio_act1 = 0.0                 # 0 starbases (low priority during expansion)
starbase_ratio_act2 = 0.5                 # 1 per 2 colonies (economic infrastructure)
starbase_ratio_act3 = 1.0                 # 1 per colony (economic + defensive)
starbase_ratio_act4 = 2.0                 # 2 per colony (full infrastructure)

[eparch_terraforming]
# Terraforming priority calculation parameters
priority_base = 0.7                       # Base priority (0.0-1.0)
priority_cost_divisor = 5000.0            # Cost divisor for scaling (0.7 + cost/divisor)
priority_critical_threshold = 0.75        # Threshold for Critical priority (vs High)

[eparch_economic_pressure]
# Competitive economic assessment thresholds
# Used to detect when AI is falling behind economically
production_ratio_moderate = 0.7           # <70% of average enemy = economic pressure
production_ratio_severe = 0.5             # <50% of average enemy = severe pressure
shipyard_advantage_threshold = 3          # Enemy has 3+ more shipyards

# Infrastructure priority boosts when under economic pressure
boost_moderate_pressure = 1.5             # 50% priority boost at moderate pressure
boost_severe_pressure = 2.0               # 100% priority boost at severe pressure
boost_shipyard_disadvantage = 1.3         # 30% boost for shipyard disadvantage

[eparch_reprioritization]
# Reprioritization logic parameters (extends global reprioritization config)
max_iterations = 3                        # Maximum reprioritization iterations
expensive_requirement_ratio = 0.3         # >30% of treasury = expensive

# ==============================================================================
# INTELLIGENCE INTEGRATION (Phase B+)
# ==============================================================================
# Enhanced intelligence processing from engine intelligence reports
# Enables RBA to utilize ColonyIntelReport, SystemIntelReport, etc.

[intelligence]
# Report freshness thresholds (turns)
colony_intel_stale_threshold = 10      # Colony reports stale after 10 turns
system_intel_stale_threshold = 5       # Fleet movement stale after 5 turns
starbase_intel_stale_threshold = 15    # Economic/tech intel stale after 15 turns

# Threat assessment weights (must sum to 1.0)
threat_fleet_strength_weight = 0.4     # Fleet strength contribution to threat
threat_proximity_weight = 0.3          # Distance contribution to threat
threat_recent_activity_weight = 0.3    # Recent hostile actions contribution

# Threat distance thresholds (jumps)
threat_critical_distance = 1           # Enemy 1 jump away = Critical
threat_high_distance = 2               # Enemy 2 jumps away = High
threat_moderate_distance = 4           # Enemy 4 jumps away = Moderate

# Vulnerability assessment
vulnerability_defense_ratio_threshold = 0.5  # Defender/Attacker < 0.5 = vulnerable
vulnerability_value_threshold = 30           # Min production to be invasion target

# Combat learning (Phase C)
combat_report_learning_enabled = true   # Learn from combat encounters
combat_lesson_retention_turns = 50      # Remember lessons for 50 turns
combat_doctrine_detection_threshold = 3 # Detect doctrine after 3 battles

# Economic intelligence (Phase C)
economic_assessment_min_colonies = 2    # Need 2+ known colonies for assessment
economic_strength_production_weight = 0.6
economic_strength_income_weight = 0.4

# Research intelligence (Phase C)
tech_gap_critical_threshold = 3         # 3+ tech levels behind = critical gap
tech_gap_high_threshold = 2             # 2 tech levels behind = high priority

[intelligence_threat_response]
# Threat-aware budget allocation (Phase D)
low_threat_boost = 0.10
moderate_threat_boost = 0.30
high_threat_boost = 0.50
critical_threat_boost = 1.00
multi_threat_multiplier = 1.5
defense_boost_ratio = 0.6
military_boost_ratio = 0.4

[intelligence_surveillance]
# Surveillance gap priority weights (Phase D)
border_system_priority = 0.9
high_value_priority = 0.8
transit_route_priority = 0.6
recent_activity_priority = 0.7

[intelligence_diplomatic_events]
# Diplomatic event analysis (Phase E)
war_significance_threshold = 8
alliance_significance_threshold = 7
blockade_critical_threshold = 0.4

[intelligence_counterintel]
# Counter-intelligence priorities (Phase E)
high_frequency_threshold = 3
detection_success_threshold = 0.6
priority_boost_espionage = 0.15

[intelligence_construction_analysis]
# Construction trend detection (Phase E)
buildup_threshold_shipyards = 2
velocity_threat_threshold = 1.5
observation_window_turns = 10

[intelligence_patrol_detection]
# Patrol pattern recognition (Phase E)
min_sightings_for_pattern = 3
pattern_confidence_threshold = 0.7
staleness_threshold_turns = 5

[drungarius]
# Intelligence coordinator settings
intel_processing_enabled = true         # Enable enhanced intelligence processing
use_combat_lessons = true              # Use CombatEncounterReport for learning (Phase C)
use_starbase_surveillance = true       # Use StarbaseSurveillanceReport (Phase D)
prioritize_high_value_targets = true   # Focus espionage on valuable targets

# Espionage budget allocation by Act (PP per turn)
espionage_budget_act1 = 5               # Act 1: Minimal espionage (expansion focus)
espionage_budget_act2 = 10              # Act 2: Moderate espionage (rising tensions)
espionage_budget_act3 = 10              # Act 3: Maintain intelligence during war
espionage_budget_act4 = 20              # Act 4: Maximum espionage (endgame intelligence)

# Research budget allocation by Act (PP per turn, for tech field analysis)
research_budget_act1 = 3                # Act 1: Minimal tech analysis
research_budget_act2 = 7                # Act 2: Moderate tech intelligence
research_budget_act3 = 10               # Act 3: Increased tech tracking
research_budget_act4 = 15               # Act 4: Maximum tech intelligence

# ==============================================================================
# ESPIONAGE OPERATIONS (src/ai/rba/drungarius/operations.nim)
# ==============================================================================

[drungarius_operations]
# EBP (Espionage Budget Points) thresholds for operations
ebp_intelligence_theft = 8              # Steal enemy intel database
ebp_assassination = 10                  # Assassinate enemy leaders
ebp_sabotage_high = 7                   # High-value sabotage
ebp_plant_disinformation = 6            # Corrupt enemy intelligence
ebp_economic_manipulation = 6           # Economic warfare
ebp_cyber_attack = 6                    # Soften defenses
ebp_tech_theft = 5                      # Steal research (default)
ebp_psyops_campaign = 3                 # Economic harassment
ebp_sabotage_low = 2                    # Minimal sabotage

# CIP (Counter-Intelligence Points) thresholds
cip_minimum_counter_intel = 4           # Minimum CIP for counter-intel sweep
cip_activation_threshold = 4            # Projected CIP to activate counter-intel

# Prestige-based decision thresholds
prestige_gap_assassination = 300        # Prestige gap to consider assassination
prestige_gap_sabotage_high = 200        # Prestige gap for high sabotage
prestige_gap_intelligence_theft = 100   # Prestige gap for intel theft targeting
prestige_gap_disinformation = 200       # Prestige gap for disinformation targeting
prestige_high_target_threshold = 900    # Protect when prestige > this
prestige_safety_threshold = 50          # Don't do espionage if prestige < this

# Operation chance multipliers (0.0-1.0, rolled per operation)
chance_intelligence_theft = 0.15        # 15% chance when EBP available
chance_assassination = 0.30             # 30% chance vs prestige leaders
chance_sabotage_high = 0.40             # 40% chance vs rich enemies
chance_plant_disinformation = 0.20      # 20% chance when available
chance_economic_manipulation = 0.50     # 50% for economic-focused AI
chance_psyops_campaign = 0.50           # 50% for cheap harassment

# Target selection scoring weights
target_prestige_gap_multiplier = 0.01   # +1 priority per 100 prestige gap
target_enemy_priority_boost = 200.0     # Major boost for diplomatic enemies
target_random_factor_max = 50.0         # Prevent predictability (0-50 random)

# Personality-based espionage frequency (% chance per turn)
frequency_espionage_focused = 0.70      # 70% for risk-tolerant + low economic
frequency_economic_focused = 0.40       # 40% for high economic focus
frequency_aggressive = 0.30             # 30% for aggressive military AI
frequency_balanced = 0.50               # 50% for balanced AI

# Personality thresholds for frequency determination
frequency_risk_tolerance_threshold = 0.6   # Above this = espionage-focused
frequency_economic_focus_threshold = 0.7   # Above this = economic-focused
frequency_aggression_threshold = 0.7       # Above this = aggressive (less espionage)
frequency_economic_focus_cap = 0.5         # Below this for espionage-focused check
economic_focus_manipulation = 0.6          # For economic manipulation

# Counter-intel periodic sweep
counter_intel_periodic_frequency = 5    # Sweep every N turns (defensive AI)
counter_intel_aggression_threshold = 0.5  # Below this = defensive (periodic sweeps)

# ==============================================================================
# RECONNAISSANCE (src/ai/rba/drungarius/reconnaissance/)
# ==============================================================================
# Scout management moved from Domestikos to Drungarius (Intelligence Advisor)
# Follows Eparch/ETAC pattern: single advisor owns complete pipeline

[drungarius_reconnaissance]
# Scout build targets by Act (intelligence coverage scaling)
scout_target_act1 = 8            # Increased from 3 for earlier intelligence (GOAP needs data)
scout_target_act2 = 10           # Increased to maintain coverage
scout_target_act3 = 12           # Full coverage
scout_target_act4 = 14           # Comprehensive intelligence

# Intelligence-driven scaling
scouts_per_stale_system = 0.5    # 1 scout per 2 stale intel systems
scouts_per_enemy_house = 1.0     # 1 scout per enemy house
max_scout_distance = 8           # Maximum jumps for reconnaissance mission

# Mission priorities (higher = more urgent)
priority_spy_planet = 90         # Detailed colony intelligence
priority_hack_starbase = 85      # Starbase + orbital defense intel
priority_spy_system = 75         # Fleet movement tracking
priority_view_world = 70         # Basic system reconnaissance

# Budget affordability thresholds (percentage of total budget)
affordability_act1 = 0.10        # 10% - limited scouts in land grab
affordability_act2 = 0.15        # 15% - intelligence escalation
affordability_act3 = 0.20        # 20% - war intelligence priority
affordability_act4 = 0.25        # 25% - comprehensive coverage

# ==============================================================================
# ESPIONAGE REQUIREMENTS (src/ai/rba/drungarius/requirements.nim)
# ==============================================================================

[drungarius_requirements]
# Target scoring normalization divisors
tech_value_divisor = 10.0               # Normalize tech level differences
economic_value_divisor = 100.0          # Normalize production values
military_threat_divisor = 200.0         # Normalize fleet strength

# Detection risk CI weakness scores (0.0-3.0)
ci_weakness_unknown = 2.5               # Unknown target risk
ci_weakness_low = 3.0                   # Easy target
ci_weakness_moderate = 1.5              # Moderate risk
ci_weakness_high = 0.5                  # Risky target
ci_weakness_critical = 0.1              # Very risky (almost avoid)
ci_weakness_default = 2.0               # Default assumption

# Diplomatic priority weights
diplomatic_weight_enemy = 3.0           # Open war = highest priority
diplomatic_weight_hostile = 2.0         # Hostile = medium-high
diplomatic_weight_neutral = 1.0         # Neutral = baseline

# Multi-factor score weights (personality-adjusted)
score_weight_tech = 1.0                 # Tech always valuable
score_weight_economic = 1.5             # Economic focus amplifies
score_weight_military = 1.5             # Aggression amplifies
score_weight_ci_weakness = 1.2          # Risk-averse prefer easy
score_weight_diplomatic = 2.0           # Diplomacy always important

# Sabotage bottleneck scoring
sabotage_shipyard_weight = 100          # Points per shipyard
sabotage_project_weight = 20            # Points per active project
sabotage_activity_very_high = 80        # Very high construction activity
sabotage_activity_high = 50             # High activity
sabotage_activity_moderate = 20         # Moderate activity
sabotage_activity_low = 5               # Low activity
sabotage_infrastructure_unit_value = 10 # Points per IU
sabotage_starbase_value = 50            # Points per starbase
sabotage_shipyard_concentration = 2     # Threshold for concentration (yards)

# Counter-intelligence assessment
ci_detection_heavy_activity = 3         # Activity points for High/Critical risk
ci_detection_moderate_activity = 1      # Activity points for Moderate risk
ci_total_threat_threshold = 5           # Significant espionage threat
ci_emergency_cip_boost_max = 3          # Max emergency CIP boost
ci_pp_per_point = 40                    # PP cost per EBP/CIP point
ci_significant_activity = 2             # Threshold for counter-intel sweep

# EBP/CIP investment priorities
ebp_critical_threshold = 3              # Below this = Critical priority
ebp_high_gap_threshold = 5              # Gap for High priority investment
cip_high_gap_threshold = 5              # Gap for High priority investment
cip_high_priority_threshold = 5         # For fallback CI sweeps
cip_risk_averse_threshold = 10          # For risk-averse CI maintenance

# Act 3 war intensity bonuses
act3_war_ebp_bonus = 5                  # +5 EBP for war intensity
act3_war_cip_bonus = 2                  # +2 CIP for tech tracking

# Operation EBP thresholds (requirements generation)
req_ebp_sabotage_bottleneck = 7         # For economic bottleneck sabotage
req_ebp_secondary_sabotage = 12         # For secondary bottleneck target
req_ebp_operations_vs_enemies = 8       # For intelligence theft operations
req_ebp_disinformation = 6              # For disinformation ops
req_ebp_economic_manipulation = 6       # For economic manipulation
req_ebp_cyber_attack = 5                # For cyber attacks
req_ebp_assassination = 10              # For assassination (luxury op)
req_ebp_intel_gathering = 3             # For SpyOnPlanet missions (basic recon)

# Intel freshness thresholds
intel_freshness_threshold = 5           # Max age (turns) for intel to be fresh

# Operation cost estimates (PP)
cost_sabotage = 50                      # Sabotage operation cost
cost_intelligence_theft = 40            # Intelligence theft cost
cost_disinformation = 35                # Disinformation cost
cost_economic_manipulation = 35         # Economic manipulation cost
cost_cyber_attack = 30                  # Cyber attack cost
cost_assassination = 60                 # Assassination cost (expensive)
cost_counter_intel_sweep = 4            # Counter-intel sweep cost
cost_spy_mission = 0                    # SpyOnPlanet mission cost (scouts only, no PP)

# Personality thresholds for requirements
aggression_secondary_sabotage = 0.6     # For secondary sabotage target
aggression_disinformation = 0.6         # For disinformation operations
aggression_assassination = 0.8          # For assassination (very aggressive)
risk_tolerance_ci_maintenance = 0.4     # Below this = maintain CI posture

# Prestige awareness (Gap 6)
prestige_penalty_threshold_ratio = 0.05 # 5% of budget threshold

# ==============================================================================
# BASILEUS CONFIGURATION (Decision Mediator)
# ==============================================================================
# Personality-driven advisor weight adjustments

[basileus]
# Personality influence multipliers (applied to base weight of 1.0)
# Formula: baseWeight = 1.0 ± (personalityTrait - 0.5) * multiplier
personality_domestikos_multiplier = 0.3     # Aggression influence on fleet advisor
personality_logothete_multiplier = 0.3      # Tech priority influence on research advisor
personality_drungarius_multiplier = 0.15    # Aggression influence on intelligence advisor
personality_protostrator_multiplier = 0.3   # Diplomacy value influence on strategic advisor
personality_eparch_multiplier = 0.3         # Economic focus influence on economic advisor

# Act-specific adjustments
act1_research_multiplier = 0.7              # Reduce research priority in Act 1 (expansion focus)
act2_war_research_multiplier = 0.85         # Reduce research during Act 2 wars
act2_hostile_research_multiplier = 0.9      # Reduce research with hostile neighbors in Act 2
act3_war_military_multiplier = 2.0          # Boost military in Act 3 war
act4_war_military_multiplier = 2.5          # Maximum military focus in Act 4 war
act3_war_research_multiplier = 0.7          # Reduce research during Act 3 war
act4_war_research_multiplier = 0.5          # Minimal research in Act 4 war (all-in military)
act3_war_diplomacy_multiplier = 0.60        # Reduce diplomacy during war (focus on combat)
act3_peace_diplomacy_multiplier = 0.75      # Moderate diplomacy in Act 3 peace
act4_peace_research_multiplier = 1.0        # Maintain tech in Act 4 peace
act3_peace_research_multiplier = 0.8        # Slight reduction in Act 3 peace

# ==============================================================================
# GAP FIXES (Phase 1-2)
# ==============================================================================
# Configuration for architectural improvements to RBA system

[feedback_system]
# Rich feedback generation (Gap 6)
enabled = true
suggest_cheaper_alternatives = true
min_partial_fulfillment_ratio = 0.25

[reprioritization]
# Enhanced reprioritization logic (Gap 4)
enable_quantity_adjustment = true
min_quantity_reduction = 1
enable_substitution = true
max_cost_reduction_factor = 0.6
facility_critical_to_high_turns = 10
facility_high_to_medium_turns = 20

[standing_orders_integration]
# Standing order integration (Gap 5)
generate_support_requirements = true
defense_gap_priority_boost = 1
filler_standing_order_bias = 0.3
track_colony_defense_history = true
max_history_entries = 50

# ==============================================================================
# EPARCH INDUSTRIAL INVESTMENT
# Source: Previously hardcoded in industrial_investment.nim
# ==============================================================================

[eparch_industrial]
# RESOLVED: Match economy.toml (100.0) - was 200.0
iu_growth_divisor = 100.0           # IU passive growth divisor
iu_payback_threshold_turns = 10     # Investment payback threshold
iu_affordability_multiplier = 3     # Treasury safety multiplier (cost * 3)
iu_investment_fraction = 0.25       # Invest 25% of IU deficit
iu_minimum_investment = 10          # Minimum 10 IU per investment

# ==============================================================================
# TREASURY THRESHOLDS
# Source: Previously hardcoded across RBA modules
# ==============================================================================

[treasury_thresholds]
terraform_minimum = 800             # Min treasury for terraforming decisions
terraform_buffer = 200              # Reserve buffer for terraforming
transfer_healthy = 500              # Healthy treasury for logistics transfers
salvage_critical = 100              # Critical threshold for salvage decisions
reactivation_healthy = 1000         # Healthy treasury for reactivation

# ==============================================================================
# AFFORDABILITY CHECKS
# Source: Previously hardcoded in build_requirements.nim
# ==============================================================================

[affordability_checks]
# Treasury multipliers for different build decisions
general_multiplier = 1.5            # General affordability check (1.5x cost)
shield_multiplier = 2.0             # Shield affordability check (2x cost)
critical_multiplier = 3.0           # Critical threshold check (3x cost)

# ==============================================================================
# PROTOSTRATOR CONFIGURATION (Strategic & Diplomatic Advisor)
# ==============================================================================
# Diplomatic assessment and recommendation thresholds

[protostrator]
# Infrastructure value scoring
infrastructure_value_per_point = 5  # Value per infrastructure point

# Combat analysis parameters
combat_freshness_turns = 5          # Recent combat = last 5 turns

# Opportunity scoring (0.0-1.0 scale)
opportunity_score_recent_combat = 0.2   # Enemy recently in combat
opportunity_score_at_war = 0.3          # Enemy at war with others
opportunity_score_tensions = 0.1        # Enemy has diplomatic tensions
opportunity_score_multiple_fronts = 0.2 # Enemy fighting on multiple fronts

# Risk assessment
baseline_risk = 0.3                 # 30% baseline diplomatic risk

# Urgency scoring (additive)
urgency_critical_threats = 3        # +3 for critical military threats
urgency_economic_pressure = 2       # +2 for economic disadvantage
urgency_diplomatic_isolation = 2    # +2 for diplomatic isolation
urgency_border_tension = 2          # +2 for border tensions
urgency_prestige_threat = 3         # +3 for prestige competition

# Diplomatic requirement thresholds by Act
threshold_multiplier_act1 = 3.0     # Act 1: High threshold (expansion focus)
threshold_multiplier_act2 = 3.0     # Act 2: High threshold (buildup)
threshold_multiplier_act3 = 2.5     # Act 3: Lower threshold (war diplomacy)
threshold_multiplier_act4 = 2.5     # Act 4: Lower threshold (endgame)

# Mutual enemies scoring
mutual_enemies_base_score = 2.0     # Base score for shared enemies

[protostrator_pact_assessment]
# Non-Aggression Pact recommendation scoring (0.0-1.0 scale)
shared_enemies_weight = 0.3         # Weight for shared enemy count
mutual_enemies_weight = 0.2         # Weight per mutual enemy
diplomacy_trait_weight = 0.4        # Weight for diplomacy personality value
trust_weight = 0.2                  # Weight for low violation risk
recommendation_threshold = 0.5      # Threshold to recommend pact (≥0.5)

[protostrator_stance_recommendations]
# Stance change recommendation thresholds
hostile_threshold = 0.5             # Recommend Hostile if score ≥0.5
enemy_threshold = 0.7               # Recommend Enemy (war) if score ≥0.7
escalate_threshold = 0.6            # Escalate stance if score ≥0.6
deescalate_threshold = 0.5          # De-escalate stance if score ≥0.5
normalize_threshold = 0.5           # Normalize relations if score ≥0.5

# Stance scoring weights (0.0-1.0 scale)
aggression_hostile_weight = 0.3     # Aggression → Hostile
aggression_enemy_weight = 0.5       # Aggression → Enemy (war)
opportunity_hostile_weight = 0.2    # Opportunity → Hostile
opportunity_enemy_weight = 0.3      # Opportunity → Enemy
diplomacy_deescalate_weight = 0.4   # Diplomacy → De-escalate
diplomacy_normalize_weight = 0.4    # Diplomacy → Normalize
peace_bias_weight = 0.5             # Peace bias → De-escalate

# ==============================================================================
# LOGOTHETE CONFIGURATION (Research & Technology Advisor)
# ==============================================================================
# Research budget allocation across tech fields

[logothete]
# Technology caps
max_science_level = 8               # Science Level caps at 8

# Fixed research costs (estimated PP per tech requirement)
cost_urgent_tech = 200              # Urgent tech research
cost_counter_tech = 250             # Counter-tech to close gaps
cost_field_research = 300           # General field research

[logothete_allocation]
# Research budget allocation ratios by situation
# Act 1-2: Expansion focus (unbalanced allocation)
act1_economic_ratio = 0.33          # 33% to Economic Level (EL)
act1_science_ratio = 0.25           # 25% to Science Level (SL)
act1_remainder_split = true         # Split remainder across CST/WEP/DEF

# Act 3: Balanced growth
act3_economic_ratio = 0.40          # 40% to EL
act3_science_ratio = 0.40           # 40% to SL

# War economy: Minimal research
war_economic_ratio = 0.20           # 20% to EL (reduced)
war_science_ratio = 0.20            # 20% to SL (reduced)

# Default allocation (fallback)
default_economic_ratio = 0.33       # 33% to EL
default_science_ratio = 0.33        # 33% to SL

[logothete_counter_tech]
# Counter-technology response parameters
enemy_advantage_critical = 3        # Enemy 3+ levels ahead = critical
enemy_advantage_high = 2            # Enemy 2+ levels ahead = high priority

# ==============================================================================
# TECHNOLOGY FIELD ALLOCATIONS
# ==============================================================================
# Personality-driven tech field allocation percentages (src/ai/rba/logothete/allocation.nim)
# After EL/SL split, remaining budget (TRP) is allocated across 9 tech fields
# Percentages as ratios (0.0-1.0) that must sum to ~1.0 per strategy

[logothete_tech_allocations_thresholds]
# Personality thresholds for strategy selection
tech_priority_threshold = 0.6       # High tech priority cutoff
economic_focus_threshold = 0.7      # High economic focus cutoff
aggression_threshold = 0.7          # High aggression cutoff
aggression_peaceful = 0.5           # Threshold for peaceful vs aggressive split

# Tech Priority + Aggressive Strategy (techPriority > 0.6, aggression > 0.5)
# Focus: Weapons, Construction, Cloaking, FD
[logothete_tech_allocations_tech_priority_aggressive]
weapons_tech = 0.30                 # 30% - Primary offensive tech
construction_tech = 0.20            # 20% - Build capacity for war fleet
cloaking_tech = 0.20                # 20% - Stealth operations
electronic_intelligence = 0.10      # 10% - Intel gathering
fighter_doctrine = 0.10             # 10% - Carrier operations
advanced_carrier_ops = 0.10         # 10% - Enhanced carrier capability
terraforming_tech = 0.0             # 0% - Not priority for aggression
shield_tech = 0.0                   # 0% - Offense over defense
counter_intelligence = 0.0          # 0% - Not priority

# Tech Priority + Peaceful Strategy (techPriority > 0.6, aggression <= 0.5)
# Focus: Infrastructure, Counter-intel, Terraforming
[logothete_tech_allocations_tech_priority_peaceful]
construction_tech = 0.30            # 30% - Infrastructure focus
terraforming_tech = 0.20            # 20% - Peaceful expansion
shield_tech = 0.20                  # 20% - Defensive technology
electronic_intelligence = 0.10      # 10% - Intel gathering
counter_intelligence = 0.10         # 10% - Defensive espionage
fighter_doctrine = 0.10             # 10% - Carrier operations
weapons_tech = 0.0                  # 0% - Not priority for peaceful
cloaking_tech = 0.0                 # 0% - Not priority
advanced_carrier_ops = 0.0          # 0% - Minimal carrier focus

# Economic Focus Strategy (economicFocus > 0.7)
# Focus: Construction, Terraforming, light carrier support
[logothete_tech_allocations_economic_focus]
construction_tech = 0.40            # 40% - Maximum build capacity
terraforming_tech = 0.30            # 30% - Colony development
fighter_doctrine = 0.20             # 20% - Carrier for defense
advanced_carrier_ops = 0.10         # 10% - Enhanced carriers
weapons_tech = 0.0                  # 0% - Not economic priority
cloaking_tech = 0.0                 # 0% - Not economic priority
electronic_intelligence = 0.0       # 0% - Not economic priority
shield_tech = 0.0                   # 0% - Not economic priority
counter_intelligence = 0.0          # 0% - Not economic priority

# War Economy Strategy (aggression > 0.7)
# Focus: Weapons, Construction for warships, carrier operations
[logothete_tech_allocations_war_economy]
weapons_tech = 0.40                 # 40% - Maximum offensive power
construction_tech = 0.30            # 30% - Build war fleet
fighter_doctrine = 0.20             # 20% - Carrier strike capability
advanced_carrier_ops = 0.10         # 10% - Enhanced carriers
cloaking_tech = 0.0                 # 0% - Not priority in total war
electronic_intelligence = 0.0       # 0% - Not priority
terraforming_tech = 0.0             # 0% - Not priority in war
shield_tech = 0.0                   # 0% - Offense over defense
counter_intelligence = 0.0          # 0% - Not priority

# Balanced/Default Strategy (fallback)
# Focus: Construction, Weapons, Carriers, Terraforming
[logothete_tech_allocations_balanced_default]
construction_tech = 0.30            # 30% - Infrastructure foundation
weapons_tech = 0.20                 # 20% - Moderate offense
fighter_doctrine = 0.20             # 20% - Carrier operations
terraforming_tech = 0.20            # 20% - Colony development
advanced_carrier_ops = 0.10         # 10% - Carrier support
cloaking_tech = 0.0                 # 0% - Not balanced priority
electronic_intelligence = 0.0       # 0% - Not balanced priority
shield_tech = 0.0                   # 0% - Not balanced priority
counter_intelligence = 0.0          # 0% - Not balanced priority

# ==============================================================================
# GOAP STRATEGIC PLANNING
# ==============================================================================
# Goal-Oriented Action Planning for multi-turn strategic decision making
# Status: MVP integration (Fleet + Build domains only)

[goap]
enabled = true                          # Enabled for MVP integration testing
planning_depth = 5                      # Phase 3: Max turns to plan ahead (increased for multi-turn invasions)
confidence_threshold = 0.5              # Min confidence to execute plan
max_concurrent_plans = 5                # Phase 3: Limit active plans (increased from 3)
defense_priority = 0.8                  # Weight for defensive goals
offense_priority = 0.7                  # Phase 3: Weight for offensive goals (increased from 0.6)
log_plans = true                        # Debug logging (enable for MVP)
budget_guidance_boost_factor = 0.3      # GOAP budget estimates boost RBA requirements
replan_stalled_turns = 3                # Replan if no progress for 3 turns
replan_budget_shortfall_ratio = 0.8     # Replan if remaining cost > 80% of treasury
new_opportunity_scan_frequency = 3      # Phase 3: Check for new opportunities every 3 turns (reduced frequency)

# Phase 3: Invasion Planning Parameters
invasion_min_strength_ratio = 1.5       # Need 1.5x estimated enemy strength
invasion_max_distance = 8               # Max jumps to invasion target
invasion_bombardment_estimate = 3       # Estimated bombardment turns for moderate defenses
invasion_priority_boost = 0.2           # Priority boost for invasion goals

# Phase 3: Campaign Coordination
disable_rba_campaigns_with_goap = false # Set true to disable Phase 2 RBA campaigns when GOAP handles invasions

# ==============================================================================
# ACT TRANSITIONS
# ==============================================================================
# Configurable thresholds for game Act transitions
# Act 1 (Land Grab) continues until colonization threshold is met

[act_transitions]
act1_colonization_threshold = 0.90  # Act 1 ends when ≥90% of systems colonized
act2_colonization_threshold = 0.98  # Act 2 → Act 3 when ≥98% colonized
act2_max_turn = 22                  # Act 2 ends at turn 22 even if <98% colonized
act3_max_turn = 35                  # Act 3 ends at turn 35 (transition to Act 4)

# ==============================================================================
# ACT-SPECIFIC ADVISOR PRIORITIES
# ==============================================================================
# Maps the 4-Act Strategic Progression to advisor weight multipliers
# Based on docs/ai/architecture/ai_architecture.adoc lines 301-407
#
# These multipliers are applied to advisor requirements during Basileus mediation
# to reflect the strategic priorities of each game phase.
#
# Priority Mapping (Architecture → Config):
#   CRITICAL = 1.5x multiplier
#   HIGH     = 1.2x multiplier
#   MEDIUM   = 1.0x multiplier (baseline)
#   LOW      = 0.6x multiplier

[act_priorities_act1_land_grab]
# Act 1 Focus: Expansion & Reconnaissance
# Strategic Goal: Claim as much territory as possible before map fills
eparch_multiplier = 1.5           # CRITICAL - Drive aggressive colonization
domestikos_multiplier = 1.2       # HIGH - Build exploration ships, minimal combat
drungarius_multiplier = 1.0       # MEDIUM - Map nearby systems, find targets
logothete_multiplier = 1.0        # MEDIUM - CST for facilities, Propulsion for speed
protostrator_multiplier = 0.6     # LOW - Remain neutral, avoid early conflicts

[act_priorities_act2_rising_tensions]
# Act 2 Focus: Consolidation & Military Buildup
# Strategic Goal: Build defensive position and prepare for conflict
domestikos_multiplier = 1.5       # CRITICAL - Construct credible combat fleet
eparch_multiplier = 1.2           # HIGH - Build starbases, invest in industry
logothete_multiplier = 1.2        # HIGH - Military tech (Weapons, Shields, Armor)
drungarius_multiplier = 1.0       # MEDIUM - Shift to espionage, assess threats
protostrator_multiplier = 1.0     # MEDIUM - Form defensive pacts, create blocs

[act_priorities_act3_total_war]
# Act 3 Focus: Conquest
# Strategic Goal: Eliminate rivals through decisive military action
domestikos_multiplier = 1.5       # CRITICAL - Execute large-scale invasions
drungarius_multiplier = 1.2       # HIGH - Tactical intel, sabotage enemy production
protostrator_multiplier = 1.2     # HIGH - Manage war alliances, break coalitions
eparch_multiplier = 1.0           # MEDIUM - War economy, replace combat losses
logothete_multiplier = 1.0        # MEDIUM - Advanced combat tech for advantage

[act_priorities_act4_endgame]
# Act 4 Focus: Securing Victory
# Strategic Goal: Finish off remaining rivals or defend leading position
domestikos_multiplier = 1.5       # CRITICAL - Eliminate last rivals, defend lead
eparch_multiplier = 1.2           # HIGH - Maximize prestige generation
protostrator_multiplier = 1.2     # HIGH - Isolate leader or prevent coalition
logothete_multiplier = 1.0        # MEDIUM - Game-ending tech for prestige/power
drungarius_multiplier = 1.0       # MEDIUM - Counter last-ditch espionage

# ==============================================================================
# COLONIZATION PARAMETERS
# ==============================================================================
# Proximity-weighted colonization targeting for circular expansion patterns

[colonization]
proximity_max_distance = 3        # Max jumps for proximity bonus
proximity_bonus_per_jump = 25.0   # Bonus points per jump closer to owned colony
proximity_weight_act1 = 0.05      # REDUCED from 0.3 - maximum spread in Act 1-2 (frontier expansion)
proximity_weight_act4 = 0.9       # Proximity weight in Act 3-4 (high - consolidation)

