// EC4X Game Limits Configuration v0.1
// Source: docs/specs/02-assets.md, docs/specs/03-economy.md
// This file defines all functional limits, caps, and capacities for the game.

// --- C2 Pool & Fleet Limits ---
c2Limits {
    (docs)"docs/specs/02-assets.md#section-2-3-3"
    c2ConversionRatio 0.3    // Total House IU * 0.3 = C2 from industry
    c2OverdraftRatio 0.5     // Cost per Turn = (Total Fleet CC - C2 Pool) * 0.5
}

// --- Strategic Command Fleet Scaling ---
strategicCommandScaling {
    (docs)"docs/specs/04-research_development.md#411-strategic-command-sc"

    // Logarithmic fleet scaling based on map density (systems per player)
    // Formula: maxFleets = base × (1 + log₂(systems_per_player ÷ divisor) × scaleFactor)
    //
    // Where:
    //   - base = SC tech level base fleet count (from tech.kdl: 10/12/14/16/18/20)
    //   - systems_per_player = total map systems ÷ player count
    //   - divisor = threshold where scaling begins (default: 8)
    //   - scaleFactor = scaling aggressiveness (default: 0.4)
    //
    // Example for SC VI (base 20):
    //   Small map  (9 sys/player):  20 × (1 + log₂(9÷8) × 0.4) ≈ 21 fleets
    //   Medium map (23 sys/player): 20 × (1 + log₂(23÷8) × 0.4) ≈ 32 fleets
    //   Large map  (39 sys/player): 20 × (1 + log₂(39÷8) × 0.4) ≈ 38 fleets
    //
    // Balance Tuning:
    //   - Increase scaleFactor (0.4 → 0.5) for more aggressive scaling on large maps
    //   - Decrease scaleFactor (0.4 → 0.3) for more conservative fleet counts
    //   - Decrease divisor (8 → 6) to make scaling kick in earlier
    //   - Increase divisor (8 → 10) to delay scaling for denser maps only

    systemsPerPlayerDivisor 8.0   // Threshold where logarithmic scaling begins
    scaleFactor 0.4                // Scaling aggressiveness (higher = more fleets on large maps)
}

// --- Unit & Facility Quantity Limits ---
quantityLimits {
    (docs)"docs/specs/02-assets.md#section-2-4-4"
    // Also see: docs/specs/02-assets.md#section-2-4-7, #section-2-4-8, docs/specs/10-reference.md#section-10-5
    maxStarbasesPerColony 3
    maxPlanetaryShieldsPerColony 1
    maxPlanetBreakersPerColony 1
    maxSpaceportsPerColony 1
}

// --- Fighter Squadron Capacity ---
fighterCapacity {
    (docs)"docs/specs/03-economy.md#section-3-6"
    // Note: Fighter squadron stats (cost, AS/DS, maintenance) defined in ships.kdl fighters section
    iuDivisor 100                  // Base capacity: 1 FS per 100 IU
    violationGracePeriodTurns 2    // 2 turns grace before auto-disband
}

// --- Population Limits ---
populationLimits {
    (docs)"docs/specs/03-economy.md#section-3-1"
    // Cross-system population constraints
    // Used by: cargo loading, population transfers, colonization
    minColonyPopulation 5000       // Minimum viable colony (5000 souls)
    maxConcurrentTransfers 5       // Max simultaneous population transfers per house
}

// --- Unit Cargo & Planet Capacity ---
capacities {
    (docs)"docs/specs/02-assets.md#section-2-2"
    // Planet PU Limits
    planetClass "Extreme" { puMax 20 }
    planetClass "Desolate" { puMax 60 }
    planetClass "Hostile" { puMax 180 }
    planetClass "Harsh" { puMax 500 }
    planetClass "Benign" { puMax 1000 }
    planetClass "Lush" { puMax 2000 }
    planetClass "Eden" { puMax 999999 }
}
