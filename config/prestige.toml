# EC4X Prestige Configuration
# Source: docs/specs/reference.md Section 9.4
#
# This file contains:
# - BALANCE VARIABLES: Prestige values (tunable during playtesting)
# - GAME CONSTANTS: Victory thresholds, morale tiers
# - DYNAMIC SCALING: Map-size based prestige multipliers for game pacing

# ============================================================================
# VICTORY CONDITIONS
# ============================================================================

[victory]
# BALANCE: Victory and defeat thresholds
prestige_victory = 2500            # Reach 2500 prestige to win (adjusted for 10x base prestige)
starting_prestige = 100            # Increased from 50 to enable Act 1 espionage (threshold: 50)
defeat_threshold = 0               # Below 0 for consecutive turns = surrender
defeat_consecutive_turns = 3       # NOTE: Elimination mechanics in config/gameplay.toml

# ============================================================================
# DYNAMIC PRESTIGE SCALING (BALANCE SYSTEM)
# ============================================================================

[dynamic_scaling]
# BALANCE: Map-size based prestige scaling for optimal game pacing
#
# DESIGN PHILOSOPHY:
# Small maps (8-10 systems/player) are the baseline - they use the full base_multiplier
# Larger maps scale DOWN from this baseline to extend game length naturally
#
# Formula: multiplier = base_multiplier * (baseline_turns / target_turns)
# Target turns = baseline_turns + (systems_per_player - baseline_ratio) * turn_scaling_factor
#
# This ensures:
# - Small maps: 5.0x multiplier (baseline) → ~30 turn games
# - Medium maps: 3.0-4.0x multiplier (scaled down) → ~40-50 turn games
# - Large maps: 2.0-2.5x multiplier (scaled down) → ~60-80 turn games
# - Victory threshold (5000 prestige) remains constant regardless of map size

enabled = true                     # Enable dynamic scaling (false = use base_multiplier for all maps)
base_multiplier = 5.0              # Prestige multiplier for small maps (baseline)
baseline_turns = 30                # Target game length for baseline small maps
baseline_systems_per_player = 8    # Systems per player that defines "small map" baseline (adjusted from 10)
turn_scaling_factor = 2.0          # Additional turns per extra system (scales game length linearly)
min_multiplier = 1.5               # Minimum multiplier floor (for massive maps)
max_multiplier = 8.0               # Maximum multiplier ceiling (for tiny maps)

# ============================================================================
# MORALE SYSTEM (GAME CONSTANTS)
# ============================================================================

[morale]
# Morale thresholds for combat (operations.md:7.1.4)
# MECHANIC: These define the morale tier system
crisis_max = 0        # ≤0: Crisis (-1 CER, never succeeds morale check)
low_max = 20          # 1-20: Low (no effect unless check succeeds >18)
average_max = 40      # 21-40: Average (+1 CER one squadron if >15)
good_max = 60         # 41-60: Good (+1 CER all if >12)
high_max = 80         # 61-80: High (+1 CER + critical auto-success if >9)
# 81+: Elite (+2 CER all if >6)

# ============================================================================
# PRESTIGE SOURCES (BALANCE VARIABLES)
# Source: reference.md Table 9.4
# ============================================================================

[economic]
# BALANCE: Economic achievement rewards
# NOTE: Values optimized for small maps (8-10 systems/player, ~30 turn games)
# Larger maps automatically scale DOWN via dynamic multiplier to extend game length
tech_advancement = 20               # Advance to new tech level
establish_colony = 50              # New colony established
max_population = 30                # Colony reaches max PU (base: 3, 5x = 15)
iu_milestone_50 = 10                # Reach 50% IU of PU (was 1)
iu_milestone_75 = 20                # Reach 75% IU of PU (was 2)
iu_milestone_100 = 30               # Reach 100% IU of PU (was 3)
iu_milestone_150 = 50              # Reach 150% IU of PU (was 5)
terraform_planet = 50              # Upgrade planet class via terraforming (was 5)

[military]
# BALANCE: Military victory rewards
# NOTE: Values optimized for small maps. Larger maps scale DOWN automatically.
destroy_squadron = 10               # Per major ship destroyed (base: 1, 5x = 5)
destroy_starbase = 50              # Destroy enemy starbase (base: 5, 5x = 25)
fleet_victory = 30                 # Win fleet battle (base: 3, 5x = 15)
invade_planet = 100                 # Successfully invade/blitz planet (base: 10, 5x = 50)
eliminate_house = 30               # Eliminate rival house (base: 3, 5x = 15)
system_capture = 100                # Capture star system (base: 10, 5x = 50)

# BALANCE: Military defeat penalties
# ACCELERATION: Tripled all penalties to maintain relative balance
lose_planet = -100                  # Lose colony to enemy (was -10)
lose_starbase = -50                # Starbase destroyed (was -5)
ambushed_by_cloak = -10             # Ambushed by cloaked fleet (was -1)
force_retreat = 20                  # Force enemy to retreat (was 2)
scout_destroyed = -30               # Scout detected and destroyed (was -3)

[espionage]
# BALANCE: Espionage success rewards
# NOTE: Values optimized for small maps. Larger maps scale DOWN automatically.
tech_theft = 20                     # Successful tech theft (was 2)
low_impact_sabotage = 10            # Low-impact sabotage success (was 1)
high_impact_sabotage = 30           # High-impact sabotage success (was 3)
assassination = 50                 # Successful assassination (was 5)
cyber_attack = 20                   # Successful cyber attack (was 2)
economic_manipulation = 30          # Successful economic manipulation (was 3)
psyops_campaign = 10                # Successful psyops (was 1)
counter_intel_sweep = 5             # Successful counter-intelligence sweep (defensive)
intelligence_theft = 40             # Steal target's entire intelligence database (high-value)
plant_disinformation = 15           # Corrupt target's intelligence with false data

# BALANCE: Espionage failure/detection penalties
# ACCELERATION: Tripled penalty
failed_espionage = -20              # Espionage detected and prevented (was -2)

[espionage_victim]
# BALANCE: Prestige penalties for being targeted by espionage
# NOTE: Values optimized for small maps. Larger maps scale DOWN automatically.
tech_theft_victim = -30             # Victim of tech theft (was -3)
low_impact_sabotage_victim = -10    # Victim of low sabotage (was -1)
high_impact_sabotage_victim = -50  # Victim of high sabotage (was -5)
assassination_victim = -70         # Leader assassinated (was -7)
cyber_attack_victim = -30           # Victim of cyber attack (was -3)
economic_manipulation_victim = -7  # Victim of economic manipulation
psyops_campaign_victim = -3        # Victim of psyops
counter_intel_sweep_victim = 0      # No victim penalty (defensive action)
intelligence_theft_victim = -20     # Intelligence database stolen (embarrassing)
plant_disinformation_victim = -15   # Intelligence corrupted (causes bad decisions)

[scout]
# BALANCE: Scout mission rewards
spy_on_planet = 2                  # Successful planet espionage
hack_starbase = 3                  # Successful starbase hack
spy_on_system = 2                  # Successful system reconnaissance

[diplomacy]
# BALANCE: Diplomatic action prestige impacts
# NOTE: Values optimized for small maps. Larger maps scale DOWN automatically.
diplomatic_pact_formation = 50     # Form diplomatic pact (was 5)
pact_violation = -100               # Break non-aggression pact (was -10)
repeat_violation = -100             # Repeat violation (dishonored status) (was -10)
dishonored_bonus = 10               # Bonus for attacking dishonored house (was 1)
declare_war = 0                    # No inherent penalty
make_peace = 0                     # No inherent bonus

[victory_achievement]
# BALANCE: Final victory rewards
victory_achieved = 5               # Game victory bonus

# ============================================================================
# PRESTIGE PENALTY MECHANICS (BALANCE VARIABLES)
# Source: reference.md Section 9.4 - Prestige Penalty Mechanics
# ============================================================================

[penalties]
# BALANCE: Tax penalties (old system - reference.md spec)
# These use simple thresholds, not rolling averages
high_tax_threshold = 51            # >51% triggers penalty
high_tax_penalty = -2              # -1 prestige
high_tax_frequency = 3             # Every 3 consecutive turns

very_high_tax_threshold = 66       # >66% triggers higher penalty
very_high_tax_penalty = -3         # -2 prestige
very_high_tax_frequency = 5        # Every 5 consecutive turns

# BALANCE: Maintenance shortfall escalation
maintenance_shortfall_base = -8    # -5 turn 1
maintenance_shortfall_increment = -3  # Increases by -2 each turn (-5, -7, -9...)

# BALANCE: Blockade penalty
blockade_penalty = -3              # -2 prestige per turn per colony

# BALANCE: Over-investment penalties (espionage/counter-intel)
over_invest_espionage = -2         # -1 per 1% over 5% threshold
over_invest_counter_intel = -2     # -1 per 1% over 5% threshold

# ============================================================================
# TAX PENALTIES (NEW SYSTEM - economy.md spec)
# Source: docs/specs/economy.md Section 3.2.1
# Uses rolling 6-turn average instead of consecutive turns
# ============================================================================

[tax_penalties]
# BALANCE: High-tax prestige penalties (rolling 6-turn average)
# Format: min_rate, max_rate, prestige_penalty
tier_1_min = 0
tier_1_max = 50
tier_1_penalty = 0                 # No penalty

tier_2_min = 51
tier_2_max = 60
tier_2_penalty = -1                # -1 prestige per turn

tier_3_min = 61
tier_3_max = 70
tier_3_penalty = -2                # -2 prestige per turn

tier_4_min = 71
tier_4_max = 80
tier_4_penalty = -4                # -4 prestige per turn

tier_5_min = 81
tier_5_max = 90
tier_5_penalty = -7                # -7 prestige per turn

tier_6_min = 91
tier_6_max = 100
tier_6_penalty = -11               # -11 prestige per turn

# ============================================================================
# TAX INCENTIVES (NEW SYSTEM - economy.md spec)
# Source: docs/specs/economy.md Section 3.2.2
# ============================================================================

[tax_incentives]
# BALANCE: Low-tax prestige bonuses (applied same turn)
# Format: min_rate, max_rate, prestige_bonus_per_colony
# Note: Population growth multipliers are in economy.toml

tier_1_min = 41
tier_1_max = 50
tier_1_prestige = 0                # No bonus

tier_2_min = 31
tier_2_max = 40
tier_2_prestige = 0                # No bonus

tier_3_min = 21
tier_3_max = 30
tier_3_prestige = 1                # +1 prestige per colony

tier_4_min = 11
tier_4_max = 20
tier_4_prestige = 2                # +2 prestige per colony

tier_5_min = 0
tier_5_max = 10
tier_5_prestige = 3                # +3 prestige per colony
