# EC4X Prestige Configuration
# Source: docs/specs/reference.md Section 9.4
#
# This file contains:
# - BALANCE VARIABLES: Prestige values (tunable during playtesting)
# - GAME CONSTANTS: Victory thresholds, morale tiers
# - DYNAMIC SCALING: Map-size based prestige multipliers for game pacing

# ============================================================================
# VICTORY CONDITIONS
# ============================================================================

[victory]
# BALANCE: Victory and defeat thresholds
# Victory mode is now configured per-game in game_setup/*.toml
# See victory_conditions.primary_mode and victory_conditions.turn_limit
# prestige_victory removed - using turn limits or elimination only
starting_prestige = 100            # Increased from 50 to enable Act 1 espionage (threshold: 50)
defeat_threshold = 0               # Below 0 for consecutive turns = surrender
defeat_consecutive_turns = 3       # NOTE: Elimination mechanics in config/gameplay.toml

# ============================================================================
# DYNAMIC PRESTIGE SCALING (BALANCE SYSTEM)
# ============================================================================

[dynamic_scaling]
# BALANCE: Map-size based prestige scaling for accelerated game pacing
#
# DESIGN PHILOSOPHY:
# Accelerated pacing: 3x increase from original to reach 30-45 turn games
# Small maps (6-8 systems/player): Highest multiplier for fastest games
# Medium maps (9-11 systems/player): Target 30-40 turns
# Large maps (12-14 systems/player): Target 40-50 turns
#
# Formula: multiplier = base_multiplier * (baseline_turns / target_turns)
# Target turns = baseline_turns + (systems_per_player - baseline_ratio) * turn_scaling_factor
#
# Combined with 5x base value increases: 5x × 15x = 75x total acceleration
# This ensures games complete in 30-45 turns for 4-player medium maps

enabled = true                     # Enable dynamic scaling (false = use base_multiplier for all maps)
base_multiplier = 15.0             # Was 5.0 → 3x increase for accelerated pacing (CRITICAL)
baseline_turns = 35                # Was 30 → target for medium maps
baseline_systems_per_player = 10   # Was 8 → recalibrated for medium maps
turn_scaling_factor = 3.0          # Was 2.0 → steeper scaling for larger maps
min_multiplier = 5.0               # Was 1.5 → prevent too-slow games on large maps
max_multiplier = 25.0              # Was 8.0 → allow tiny map acceleration

# ============================================================================
# MORALE SYSTEM (GAME CONSTANTS)
# ============================================================================

[morale]
# Morale thresholds for combat (operations.md:7.1.4)
# MECHANIC: These define the morale tier system
crisis_max = 0        # ≤0: Crisis (-1 CER, never succeeds morale check)
low_max = 20          # 1-20: Low (no effect unless check succeeds >18)
average_max = 40      # 21-40: Average (+1 CER one squadron if >15)
good_max = 60         # 41-60: Good (+1 CER all if >12)
high_max = 80         # 61-80: High (+1 CER + critical auto-success if >9)
# 81+: Elite (+2 CER all if >6)

# ============================================================================
# PRESTIGE SOURCES (BALANCE VARIABLES)
# Source: reference.md Table 9.4
# ============================================================================

[economic]
# BALANCE: Economic achievement rewards - TRUE BASE VALUES (5x INCREASED)
# These are base values BEFORE dynamic multiplier application
# Dynamic multiplier (15.0x for medium maps) scales these values automatically
# Combined effect: 5x base × 15x multiplier = 75x total acceleration
tech_advancement = 2                # REDUCED: Tech should give modest prestige (not primary focus)
establish_colony = 1                # MINIMAL: Colonization should give almost no prestige (conquest is the focus)
max_population = 15                 # Was 3 → 5x increase
iu_milestone_50 = 5                 # Was 1 → 5x increase
iu_milestone_75 = 10                # Was 2 → 5x increase
iu_milestone_100 = 15               # Was 3 → 5x increase
iu_milestone_150 = 25               # Was 5 → 5x increase
terraform_planet = 25               # Was 5 → 5x increase (major project)

[military]
# BALANCE: Military victory rewards - TRUE BASE VALUES (5x INCREASED)
# These are base values BEFORE dynamic multiplier application
destroy_squadron = 5                # Was 1 → 5x increase (per major ship destroyed)
destroy_starbase = 25               # Was 5 → 5x increase (major structure)
fleet_victory = 15                  # Was 3 → 5x increase (tactical victory)
invade_planet = 50                  # Was 10 → 5x increase (major conquest)
eliminate_house = 15                # Was 3 → 5x increase (strategic victory)
system_capture = 50                 # Was 10 → 5x increase (major conquest)

# BALANCE: Military defeat penalties - TRUE BASE VALUES (5x INCREASED)
lose_planet = -50                   # Was -10 → 5x increase (matches invade_planet)
lose_starbase = -25                 # Was -5 → 5x increase (matches destroy_starbase)
ambushed_by_cloak = -5              # Was -1 → 5x increase
force_retreat = 10                  # Was 2 → 5x increase (prestige for forcing enemy to retreat)
forced_to_retreat = -5              # NEW: penalty for being forced to retreat (1/2 of force_retreat)
scout_destroyed = -15               # Was -3 → 5x increase

# BALANCE: Undefended colony penalty (Phase F balance)
undefended_colony_penalty_multiplier = 1.5  # +50% penalty for losing undefended colonies

[espionage]
# BALANCE: Espionage success rewards - TRUE BASE VALUES (5x INCREASED)
# These are base values BEFORE dynamic multiplier application
tech_theft = 10                     # Was 2 → 5x increase (successful tech theft)
low_impact_sabotage = 5             # Was 1 → 5x increase
high_impact_sabotage = 15           # Was 3 → 5x increase
assassination = 25                  # Was 5 → 5x increase (major operation)
cyber_attack = 10                   # Was 2 → 5x increase
economic_manipulation = 15          # Was 3 → 5x increase
psyops_campaign = 5                 # Was 1 → 5x increase
counter_intel_sweep = 5             # Was 1 → 5x increase (defensive success)
intelligence_theft = 20             # Was 4 → 5x increase (high-value operation)
plant_disinformation = 10           # Was 2 → 5x increase

# BALANCE: Espionage failure/detection penalties - TRUE BASE VALUES (5x INCREASED)
failed_espionage = -10              # Was -2 → 5x increase

[espionage_victim]
# BALANCE: Prestige penalties for being targeted by espionage - TRUE BASE VALUES (5x INCREASED)
# These are base values BEFORE dynamic multiplier application
tech_theft_victim = -15             # Was -3 → 5x increase
low_impact_sabotage_victim = -5     # Was -1 → 5x increase
high_impact_sabotage_victim = -25   # Was -5 → 5x increase
assassination_victim = -35          # Was -7 → 5x increase (major embarrassment)
cyber_attack_victim = -15           # Was -3 → 5x increase
economic_manipulation_victim = -5   # Was -1 → 5x increase
psyops_campaign_victim = -5         # Was -1 → 5x increase
counter_intel_sweep_victim = 0      # No change (defensive action has no victim penalty)
intelligence_theft_victim = -10     # Was -2 → 5x increase
plant_disinformation_victim = -10   # Was -2 → 5x increase

[scout]
# BALANCE: Scout mission rewards - TRUE BASE VALUES (5x INCREASED)
spy_on_planet = 10                 # Was 2 → 5x increase (successful planet espionage)
hack_starbase = 15                 # Was 3 → 5x increase (successful starbase hack)
spy_on_system = 10                 # Was 2 → 5x increase (successful system reconnaissance)

[diplomacy]
# BALANCE: Diplomatic action prestige impacts - TRUE BASE VALUES (5x INCREASED)
# These are base values BEFORE dynamic multiplier application
declare_war = 0                     # No inherent penalty
make_peace = 0                      # No inherent bonus

[victory_achievement]
# BALANCE: Final victory rewards
victory_achieved = 5               # Game victory bonus

# ============================================================================
# PRESTIGE PENALTY MECHANICS (BALANCE VARIABLES)
# Source: reference.md Section 9.4 - Prestige Penalty Mechanics
# ============================================================================

[penalties]
# BALANCE: Tax penalties (old system - reference.md spec)
# These use simple thresholds, not rolling averages
high_tax_threshold = 51            # >51% triggers penalty
high_tax_penalty = -2              # -1 prestige
high_tax_frequency = 3             # Every 3 consecutive turns

very_high_tax_threshold = 66       # >66% triggers higher penalty
very_high_tax_penalty = -3         # -2 prestige
very_high_tax_frequency = 5        # Every 5 consecutive turns

# BALANCE: Maintenance shortfall escalation
maintenance_shortfall_base = -8    # -5 turn 1
maintenance_shortfall_increment = -3  # Increases by -2 each turn (-5, -7, -9...)

# BALANCE: Blockade penalty
blockade_penalty = -3              # -2 prestige per turn per colony

# BALANCE: Over-investment penalties (espionage/counter-intel)
over_invest_espionage = -2         # -1 per 1% over 5% threshold
over_invest_counter_intel = -2     # -1 per 1% over 5% threshold

# ============================================================================
# TAX PENALTIES (NEW SYSTEM - economy.md spec)
# Source: docs/specs/economy.md Section 3.2.1
# Uses rolling 6-turn average instead of consecutive turns
# ============================================================================

[tax_penalties]
# BALANCE: High-tax prestige penalties (rolling 6-turn average)
# Format: min_rate, max_rate, prestige_penalty
tier_1_min = 0
tier_1_max = 50
tier_1_penalty = 0                 # No penalty

tier_2_min = 51
tier_2_max = 60
tier_2_penalty = -1                # -1 prestige per turn

tier_3_min = 61
tier_3_max = 70
tier_3_penalty = -2                # -2 prestige per turn

tier_4_min = 71
tier_4_max = 80
tier_4_penalty = -4                # -4 prestige per turn

tier_5_min = 81
tier_5_max = 90
tier_5_penalty = -7                # -7 prestige per turn

tier_6_min = 91
tier_6_max = 100
tier_6_penalty = -11               # -11 prestige per turn

# ============================================================================
# TAX INCENTIVES (NEW SYSTEM - economy.md spec)
# Source: docs/specs/economy.md Section 3.2.2
# ============================================================================

[tax_incentives]
# BALANCE: Low-tax prestige bonuses (applied same turn)
# Format: min_rate, max_rate, prestige_bonus_per_colony
# Note: Population growth multipliers are in economy.toml

tier_1_min = 41
tier_1_max = 50
tier_1_prestige = 0                # No bonus

tier_2_min = 31
tier_2_max = 40
tier_2_prestige = 0                # No bonus

tier_3_min = 21
tier_3_max = 30
tier_3_prestige = 1                # +1 prestige per colony

tier_4_min = 11
tier_4_max = 20
tier_4_prestige = 2                # +2 prestige per colony

tier_5_min = 0
tier_5_max = 10
tier_5_prestige = 3                # +3 prestige per colony
