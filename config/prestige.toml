# EC4X Prestige Configuration
# Source: docs/specs/reference.md Section 9.4
#
# This file contains:
# - BALANCE VARIABLES: Prestige values (tunable during playtesting)
# - GAME CONSTANTS: Victory thresholds, morale tiers
# - DYNAMIC SCALING: Map-size based prestige multipliers for game pacing

# ============================================================================
# VICTORY CONDITIONS
# ============================================================================

[victory]
# BALANCE: Victory and defeat thresholds
prestige_victory = 5000            # Reach 5000 prestige to win
starting_prestige = 50             # NOTE: Game setup defines this in game_setup/standard.toml
defeat_threshold = 0               # Below 0 for consecutive turns = surrender
defeat_consecutive_turns = 3       # NOTE: Elimination mechanics in config/gameplay.toml

# ============================================================================
# DYNAMIC PRESTIGE SCALING (BALANCE SYSTEM)
# ============================================================================

[dynamic_scaling]
# BALANCE: Map-size based prestige scaling for optimal game pacing
# Formula: multiplier = base_multiplier * (baseline_turns / target_turns)
# Target turns = baseline_turns + (systems_per_player - baseline_ratio) * turn_scaling_factor
#
# This ensures:
# - Small maps (few systems per player): Faster games (~30 turns)
# - Large maps (many systems per player): Longer games (~60-90 turns)
# - Victory threshold remains 5000 prestige regardless of map size

enabled = true                     # Enable dynamic scaling (false = use base values only)
base_multiplier = 5.0              # Base prestige multiplier (all values in this file)
baseline_turns = 30                # Target turns for baseline map size
baseline_systems_per_player = 10   # Systems per player for baseline (40 systems / 4 players)
turn_scaling_factor = 2.0          # Additional turns per system above baseline (2 turns per extra system)
min_multiplier = 2.0               # Minimum multiplier (for huge maps)
max_multiplier = 10.0              # Maximum multiplier (for tiny maps)

# ============================================================================
# MORALE SYSTEM (GAME CONSTANTS)
# ============================================================================

[morale]
# Morale thresholds for combat (operations.md:7.1.4)
# MECHANIC: These define the morale tier system
crisis_max = 0        # â‰¤0: Crisis (-1 CER, never succeeds morale check)
low_max = 20          # 1-20: Low (no effect unless check succeeds >18)
average_max = 40      # 21-40: Average (+1 CER one squadron if >15)
good_max = 60         # 41-60: Good (+1 CER all if >12)
high_max = 80         # 61-80: High (+1 CER + critical auto-success if >9)
# 81+: Elite (+2 CER all if >6)

# ============================================================================
# PRESTIGE SOURCES (BALANCE VARIABLES)
# Source: reference.md Table 9.4
# ============================================================================

[economic]
# BALANCE: Economic achievement rewards
# NOTE: These are BASE values. Dynamic multiplier applied at runtime based on map size.
# With dynamic scaling enabled, actual awards = base * calculateDynamicMultiplier(numSystems, numPlayers)
tech_advancement = 2               # Advance to new tech level (base value)
establish_colony = 5              # New colony established (base value)
max_population = 3                # Colony reaches max PU (base: 3, 5x = 15)
iu_milestone_50 = 1                # Reach 50% IU of PU (was 1)
iu_milestone_75 = 2                # Reach 75% IU of PU (was 2)
iu_milestone_100 = 3               # Reach 100% IU of PU (was 3)
iu_milestone_150 = 5              # Reach 150% IU of PU (was 5)
terraform_planet = 5              # Upgrade planet class via terraforming (was 5)

[military]
# BALANCE: Military victory rewards
# NOTE: These are BASE values. Dynamic multiplier applied at runtime based on map size.
destroy_squadron = 1               # Per major ship destroyed (base: 1, 5x = 5)
destroy_starbase = 5              # Destroy enemy starbase (base: 5, 5x = 25)
fleet_victory = 3                 # Win fleet battle (base: 3, 5x = 15)
invade_planet = 10                 # Successfully invade/blitz planet (base: 10, 5x = 50)
eliminate_house = 3               # Eliminate rival house (base: 3, 5x = 15)
system_capture = 10                # Capture star system (base: 10, 5x = 50)

# BALANCE: Military defeat penalties
# ACCELERATION: Tripled all penalties to maintain relative balance
lose_planet = -10                  # Lose colony to enemy (was -10)
lose_starbase = -5                # Starbase destroyed (was -5)
ambushed_by_cloak = -1             # Ambushed by cloaked fleet (was -1)
force_retreat = 2                  # Force enemy to retreat (was 2)
scout_destroyed = -3               # Scout detected and destroyed (was -3)

[espionage]
# BALANCE: Espionage success rewards
# NOTE: These are BASE values. Dynamic multiplier applied at runtime based on map size.
tech_theft = 2                     # Successful tech theft (was 2)
low_impact_sabotage = 1            # Low-impact sabotage success (was 1)
high_impact_sabotage = 3           # High-impact sabotage success (was 3)
assassination = 5                 # Successful assassination (was 5)
cyber_attack = 2                   # Successful cyber attack (was 2)
economic_manipulation = 3          # Successful economic manipulation (was 3)
psyops_campaign = 1                # Successful psyops (was 1)

# BALANCE: Espionage failure/detection penalties
# ACCELERATION: Tripled penalty
failed_espionage = -2              # Espionage detected and prevented (was -2)

[espionage_victim]
# BALANCE: Prestige penalties for being targeted by espionage
# NOTE: These are BASE values. Dynamic multiplier applied at runtime based on map size.
tech_theft_victim = -3             # Victim of tech theft (was -3)
low_impact_sabotage_victim = -1    # Victim of low sabotage (was -1)
high_impact_sabotage_victim = -5  # Victim of high sabotage (was -5)
assassination_victim = -7         # Leader assassinated (was -7)
cyber_attack_victim = -3           # Victim of cyber attack (was -3)
economic_manipulation_victim = -7  # Victim of economic manipulation
psyops_campaign_victim = -3        # Victim of psyops

[scout]
# BALANCE: Scout mission rewards
spy_on_planet = 2                  # Successful planet espionage
hack_starbase = 3                  # Successful starbase hack
spy_on_system = 2                  # Successful system reconnaissance

[diplomacy]
# BALANCE: Diplomatic action prestige impacts
# NOTE: These are BASE values. Dynamic multiplier applied at runtime based on map size.
diplomatic_pact_formation = 5     # Form diplomatic pact (was 5)
pact_violation = -10               # Break non-aggression pact (was -10)
repeat_violation = -10             # Repeat violation (dishonored status) (was -10)
dishonored_bonus = 1               # Bonus for attacking dishonored house (was 1)
declare_war = 0                    # No inherent penalty
make_peace = 0                     # No inherent bonus

[victory_achievement]
# BALANCE: Final victory rewards
victory_achieved = 5               # Game victory bonus

# ============================================================================
# PRESTIGE PENALTY MECHANICS (BALANCE VARIABLES)
# Source: reference.md Section 9.4 - Prestige Penalty Mechanics
# ============================================================================

[penalties]
# BALANCE: Tax penalties (old system - reference.md spec)
# These use simple thresholds, not rolling averages
high_tax_threshold = 51            # >51% triggers penalty
high_tax_penalty = -2              # -1 prestige
high_tax_frequency = 3             # Every 3 consecutive turns

very_high_tax_threshold = 66       # >66% triggers higher penalty
very_high_tax_penalty = -3         # -2 prestige
very_high_tax_frequency = 5        # Every 5 consecutive turns

# BALANCE: Maintenance shortfall escalation
maintenance_shortfall_base = -8    # -5 turn 1
maintenance_shortfall_increment = -3  # Increases by -2 each turn (-5, -7, -9...)

# BALANCE: Blockade penalty
blockade_penalty = -3              # -2 prestige per turn per colony

# BALANCE: Over-investment penalties (espionage/counter-intel)
over_invest_espionage = -2         # -1 per 1% over 5% threshold
over_invest_counter_intel = -2     # -1 per 1% over 5% threshold

# ============================================================================
# TAX PENALTIES (NEW SYSTEM - economy.md spec)
# Source: docs/specs/economy.md Section 3.2.1
# Uses rolling 6-turn average instead of consecutive turns
# ============================================================================

[tax_penalties]
# BALANCE: High-tax prestige penalties (rolling 6-turn average)
# Format: min_rate, max_rate, prestige_penalty
tier_1_min = 0
tier_1_max = 50
tier_1_penalty = 0                 # No penalty

tier_2_min = 51
tier_2_max = 60
tier_2_penalty = -1                # -1 prestige per turn

tier_3_min = 61
tier_3_max = 70
tier_3_penalty = -2                # -2 prestige per turn

tier_4_min = 71
tier_4_max = 80
tier_4_penalty = -4                # -4 prestige per turn

tier_5_min = 81
tier_5_max = 90
tier_5_penalty = -7                # -7 prestige per turn

tier_6_min = 91
tier_6_max = 100
tier_6_penalty = -11               # -11 prestige per turn

# ============================================================================
# TAX INCENTIVES (NEW SYSTEM - economy.md spec)
# Source: docs/specs/economy.md Section 3.2.2
# ============================================================================

[tax_incentives]
# BALANCE: Low-tax prestige bonuses (applied same turn)
# Format: min_rate, max_rate, prestige_bonus_per_colony
# Note: Population growth multipliers are in economy.toml

tier_1_min = 41
tier_1_max = 50
tier_1_prestige = 0                # No bonus

tier_2_min = 31
tier_2_max = 40
tier_2_prestige = 0                # No bonus

tier_3_min = 21
tier_3_max = 30
tier_3_prestige = 1                # +1 prestige per colony

tier_4_min = 11
tier_4_max = 20
tier_4_prestige = 2                # +2 prestige per colony

tier_5_min = 0
tier_5_max = 10
tier_5_prestige = 3                # +3 prestige per colony
