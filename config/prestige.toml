# EC4X Prestige Configuration
# Source: docs/specs/reference.md Section 9.4
#
# This file contains:
# - BALANCE VARIABLES: Prestige values (tunable during playtesting)
# - GAME CONSTANTS: Victory thresholds, morale tiers
# - DYNAMIC SCALING: Map-size based prestige multipliers for game pacing

# ============================================================================
# VICTORY CONDITIONS
# ============================================================================

[victory]
# BALANCE: Victory and defeat thresholds
prestige_victory = 2500            # Reach 2500 prestige to win (adjusted for 10x base prestige)
starting_prestige = 100            # Increased from 50 to enable Act 1 espionage (threshold: 50)
defeat_threshold = 0               # Below 0 for consecutive turns = surrender
defeat_consecutive_turns = 3       # NOTE: Elimination mechanics in config/gameplay.toml

# ============================================================================
# DYNAMIC PRESTIGE SCALING (BALANCE SYSTEM)
# ============================================================================

[dynamic_scaling]
# BALANCE: Map-size based prestige scaling for optimal game pacing
#
# DESIGN PHILOSOPHY:
# Small maps (8-10 systems/player) are the baseline - they use the full base_multiplier
# Larger maps scale DOWN from this baseline to extend game length naturally
#
# Formula: multiplier = base_multiplier * (baseline_turns / target_turns)
# Target turns = baseline_turns + (systems_per_player - baseline_ratio) * turn_scaling_factor
#
# This ensures:
# - Small maps: 5.0x multiplier (baseline) → ~30 turn games
# - Medium maps: 3.0-4.0x multiplier (scaled down) → ~40-50 turn games
# - Large maps: 2.0-2.5x multiplier (scaled down) → ~60-80 turn games
# - Victory threshold (5000 prestige) remains constant regardless of map size

enabled = true                     # Enable dynamic scaling (false = use base_multiplier for all maps)
base_multiplier = 5.0              # Prestige multiplier for small maps (baseline)
baseline_turns = 30                # Target game length for baseline small maps
baseline_systems_per_player = 8    # Systems per player that defines "small map" baseline (adjusted from 10)
turn_scaling_factor = 2.0          # Additional turns per extra system (scales game length linearly)
min_multiplier = 1.5               # Minimum multiplier floor (for massive maps)
max_multiplier = 8.0               # Maximum multiplier ceiling (for tiny maps)

# ============================================================================
# MORALE SYSTEM (GAME CONSTANTS)
# ============================================================================

[morale]
# Morale thresholds for combat (operations.md:7.1.4)
# MECHANIC: These define the morale tier system
crisis_max = 0        # ≤0: Crisis (-1 CER, never succeeds morale check)
low_max = 20          # 1-20: Low (no effect unless check succeeds >18)
average_max = 40      # 21-40: Average (+1 CER one squadron if >15)
good_max = 60         # 41-60: Good (+1 CER all if >12)
high_max = 80         # 61-80: High (+1 CER + critical auto-success if >9)
# 81+: Elite (+2 CER all if >6)

# ============================================================================
# PRESTIGE SOURCES (BALANCE VARIABLES)
# Source: reference.md Table 9.4
# ============================================================================

[economic]
# BALANCE: Economic achievement rewards - TRUE BASE VALUES
# These are base values BEFORE dynamic multiplier application
# Dynamic multiplier (5.0x for small maps) scales these values automatically
tech_advancement = 2                # Advance to new tech level (base value per spec)
establish_colony = 5                # New colony established (base value per spec)
max_population = 3                  # Colony reaches max PU
iu_milestone_50 = 1                 # Reach 50% IU of PU
iu_milestone_75 = 2                 # Reach 75% IU of PU
iu_milestone_100 = 3                # Reach 100% IU of PU
iu_milestone_150 = 5                # Reach 150% IU of PU
terraform_planet = 5                # Upgrade planet class via terraforming

[military]
# BALANCE: Military victory rewards - TRUE BASE VALUES
# These are base values BEFORE dynamic multiplier application
destroy_squadron = 1                # Per major ship destroyed (spec base: +10)
destroy_starbase = 5                # Destroy enemy starbase (spec base: +50)
fleet_victory = 3                   # Win fleet battle (spec base: +30)
invade_planet = 10                  # Successfully invade/blitz planet (spec base: +100)
eliminate_house = 3                 # Eliminate rival house (spec base: +30)
system_capture = 10                 # Capture star system (spec base: +100)

# BALANCE: Military defeat penalties - TRUE BASE VALUES
lose_planet = -10                   # Lose colony to enemy (matches invade_planet base)
lose_starbase = -5                  # Starbase destroyed (matches destroy_starbase base)
ambushed_by_cloak = -1              # Ambushed by cloaked fleet
force_retreat = 2                   # Force enemy to retreat
scout_destroyed = -3                # Scout detected and destroyed

[espionage]
# BALANCE: Espionage success rewards - TRUE BASE VALUES
# These are base values BEFORE dynamic multiplier application
tech_theft = 2                      # Successful tech theft (spec base: +20)
low_impact_sabotage = 1             # Low-impact sabotage success
high_impact_sabotage = 3            # High-impact sabotage success
assassination = 5                   # Successful assassination (spec base: +50)
cyber_attack = 2                    # Successful cyber attack
economic_manipulation = 3           # Successful economic manipulation
psyops_campaign = 1                 # Successful psyops
counter_intel_sweep = 1             # Successful counter-intelligence sweep (defensive)
intelligence_theft = 4              # Steal target's entire intelligence database (high-value)
plant_disinformation = 2            # Corrupt target's intelligence with false data

# BALANCE: Espionage failure/detection penalties - TRUE BASE VALUES
failed_espionage = -2               # Espionage detected and prevented

[espionage_victim]
# BALANCE: Prestige penalties for being targeted by espionage - TRUE BASE VALUES
# These are base values BEFORE dynamic multiplier application
tech_theft_victim = -3              # Victim of tech theft
low_impact_sabotage_victim = -1     # Victim of low sabotage
high_impact_sabotage_victim = -5    # Victim of high sabotage
assassination_victim = -7           # Leader assassinated
cyber_attack_victim = -3            # Victim of cyber attack
economic_manipulation_victim = -1   # Victim of economic manipulation
psyops_campaign_victim = -1         # Victim of psyops
counter_intel_sweep_victim = 0      # No victim penalty (defensive action)
intelligence_theft_victim = -2      # Intelligence database stolen (embarrassing)
plant_disinformation_victim = -2    # Intelligence corrupted (causes bad decisions)

[scout]
# BALANCE: Scout mission rewards
spy_on_planet = 2                  # Successful planet espionage
hack_starbase = 3                  # Successful starbase hack
spy_on_system = 2                  # Successful system reconnaissance

[diplomacy]
# BALANCE: Diplomatic action prestige impacts - TRUE BASE VALUES
# These are base values BEFORE dynamic multiplier application
diplomatic_pact_formation = 5       # Form diplomatic pact (spec base: +50)
pact_violation = -10                # Break non-aggression pact (spec base: -100)
repeat_violation = -10              # Repeat violation (dishonored status)
dishonored_bonus = 1                # Bonus for attacking dishonored house
declare_war = 0                     # No inherent penalty
make_peace = 0                      # No inherent bonus

[victory_achievement]
# BALANCE: Final victory rewards
victory_achieved = 5               # Game victory bonus

# ============================================================================
# PRESTIGE PENALTY MECHANICS (BALANCE VARIABLES)
# Source: reference.md Section 9.4 - Prestige Penalty Mechanics
# ============================================================================

[penalties]
# BALANCE: Tax penalties (old system - reference.md spec)
# These use simple thresholds, not rolling averages
high_tax_threshold = 51            # >51% triggers penalty
high_tax_penalty = -2              # -1 prestige
high_tax_frequency = 3             # Every 3 consecutive turns

very_high_tax_threshold = 66       # >66% triggers higher penalty
very_high_tax_penalty = -3         # -2 prestige
very_high_tax_frequency = 5        # Every 5 consecutive turns

# BALANCE: Maintenance shortfall escalation
maintenance_shortfall_base = -8    # -5 turn 1
maintenance_shortfall_increment = -3  # Increases by -2 each turn (-5, -7, -9...)

# BALANCE: Blockade penalty
blockade_penalty = -3              # -2 prestige per turn per colony

# BALANCE: Over-investment penalties (espionage/counter-intel)
over_invest_espionage = -2         # -1 per 1% over 5% threshold
over_invest_counter_intel = -2     # -1 per 1% over 5% threshold

# ============================================================================
# TAX PENALTIES (NEW SYSTEM - economy.md spec)
# Source: docs/specs/economy.md Section 3.2.1
# Uses rolling 6-turn average instead of consecutive turns
# ============================================================================

[tax_penalties]
# BALANCE: High-tax prestige penalties (rolling 6-turn average)
# Format: min_rate, max_rate, prestige_penalty
tier_1_min = 0
tier_1_max = 50
tier_1_penalty = 0                 # No penalty

tier_2_min = 51
tier_2_max = 60
tier_2_penalty = -1                # -1 prestige per turn

tier_3_min = 61
tier_3_max = 70
tier_3_penalty = -2                # -2 prestige per turn

tier_4_min = 71
tier_4_max = 80
tier_4_penalty = -4                # -4 prestige per turn

tier_5_min = 81
tier_5_max = 90
tier_5_penalty = -7                # -7 prestige per turn

tier_6_min = 91
tier_6_max = 100
tier_6_penalty = -11               # -11 prestige per turn

# ============================================================================
# TAX INCENTIVES (NEW SYSTEM - economy.md spec)
# Source: docs/specs/economy.md Section 3.2.2
# ============================================================================

[tax_incentives]
# BALANCE: Low-tax prestige bonuses (applied same turn)
# Format: min_rate, max_rate, prestige_bonus_per_colony
# Note: Population growth multipliers are in economy.toml

tier_1_min = 41
tier_1_max = 50
tier_1_prestige = 0                # No bonus

tier_2_min = 31
tier_2_max = 40
tier_2_prestige = 0                # No bonus

tier_3_min = 21
tier_3_max = 30
tier_3_prestige = 1                # +1 prestige per colony

tier_4_min = 11
tier_4_max = 20
tier_4_prestige = 2                # +2 prestige per colony

tier_5_min = 0
tier_5_max = 10
tier_5_prestige = 3                # +3 prestige per colony
