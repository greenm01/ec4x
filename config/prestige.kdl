// EC4X Prestige Configuration v0.2
// Source: docs/specs/10-reference.md Section 10.4, docs/specs/01-gameplay.md Section 1.1
// Defines prestige values, victory/defeat conditions, morale, and dynamic scaling.

// --- Victory & Defeat Conditions ---
victory {
    (docs)"docs/specs/01-gameplay.md#section-1-1"
    // Also see: docs/specs/01-gameplay.md#section-1-4-1
    startingPrestige 100
    defeatThreshold 0            // Below 0 for consecutive turns = collapse
    defeatConsecutiveTurns 3
}

// --- Dynamic Prestige Scaling ---
dynamicScaling {
    (docs)"docs/specs/10-reference.md#section-10-4"
    // Controls game pacing by scaling base prestige values based on map size.
    enabled true
    baseMultiplier 5.0             // Baseline multiplier for small maps
    baselineTurns 30
    baselineSystemsPerPlayer 8
    turnScalingFactor 2.0
    minMultiplier 1.5
    maxMultiplier 8.0
}

// --- Morale System ---
morale {
    (docs)"docs/specs/07-combat.md#section-7-2-1"
    tier "Crisis" { maxPrestige 0 }
    tier "Low" { maxPrestige 20 }
    tier "Average" { maxPrestige 60 }
    tier "Good" { maxPrestige 80 }
    // 81+ is Elite
}

// ============================================================================
// BASE PRESTIGE VALUES
// These are the raw values before the dynamicScaling multiplier is applied.
// ============================================================================

prestigeEvents {
    (docs)"docs/specs/10-reference.md#section-10-4"
    // Espionage prestige effects also documented in docs/specs/08-diplomacy.md

    // --- Non-Competitive (Absolute Gains) ---
    techAdvancement { value 2 type "Absolute" }
    colonyEstablishment { value 5 type "Absolute" }
    victoryAchieved { value 5 type "Absolute" }

    // --- Competitive (Zero-Sum) ---
    systemCapture { value 10 type "ZeroSum" }
    shipDestroyed { value 1 type "ZeroSum" } // Per major ship
    starbaseDestroyed { value 5 type "ZeroSum" }
    fleetVictory { value 3 type "ZeroSum" } // Per battle
    planetConquered { value 10 type "ZeroSum" }
    houseEliminated { value 3 type "ZeroSum" }

    // --- Espionage (Non-Zero-Sum Competitive) ---
    techTheft { value 20 victimLoss -30 }
    sabotageLowImpact { value 10 victimLoss -10 }
    sabotageHighImpact { value 30 victimLoss -50 }
    assassination { value 50 victimLoss -70 }
    cyberAttack { value 20 victimLoss -30 }
    economicManipulation { value 30 victimLoss -7 }
    psyopsCampaign { value 10 victimLoss -3 }
    counterIntelligenceSweep { value 5 victimLoss 0 }
    intelligenceTheft { value 40 victimLoss -20 }
    plantDisinformation { value 15 victimLoss -15 }

    // --- Penalties ---
    espionageFailure { value -2 type "Penalty" }
    planetLost { value -10 type "Penalty" } // Base loss, defender side of planetConquered
    undefendedColonyMultiplier 1.5 // planetLost * 1.5, breaks zero-sum
}

// --- Recurring Penalties ---
recurringPenalties {
    (docs)"docs/specs/08-diplomacy.md#section-8-2"
    // Also see: docs/specs/08-diplomacy.md#section-8-3
    overInvestment {
        budgetThreshold 0.05 // 5%
        penaltyPerPercent -1
    }
}

// --- Tax Penalties (Rolling 6-turn average) ---
taxPenalties {
    (docs)"docs/specs/03-economy.md#section-3-2-1"
    tier 1 { minRate=0 maxRate=50 penalty=0 }
    tier 2 { minRate=51 maxRate=60 penalty=-1 }
    tier 3 { minRate=61 maxRate=70 penalty=-2 }
    tier 4 { minRate=71 maxRate=80 penalty=-4 }
    tier 5 { minRate=81 maxRate=90 penalty=-7 }
    tier 6 { minRate=91 maxRate=100 penalty=-11 }
}

// --- Low-Tax Incentives ---
taxIncentives {
    (docs)"docs/specs/03-economy.md#section-3-2-2"
    // Note: Population growth multipliers are in economy.kdl
    tier 1 { minRate=21 maxRate=30 prestigeBonusPerColony=1 }
    tier 2 { minRate=11 maxRate=20 prestigeBonusPerColony=2 }
    tier 3 { minRate=0 maxRate=10 prestigeBonusPerColony=3 }
}